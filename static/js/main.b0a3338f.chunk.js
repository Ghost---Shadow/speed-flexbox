(this["webpackJsonpspeed-flexbox"]=this["webpackJsonpspeed-flexbox"]||[]).push([[0],{140:function(e,t,n){e.exports=n(195)},145:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),c=(n(145),n(37)),l=n(115),s=n.n(l),u=n(42),d=n.n(u),h=n(232),m=n(229),f=n(234),p=n(116),v=n.n(p),g=n(226),y=n(225),x=n(228),w=n(227),b=n(72),E=n(31),S=n(128),k=n(117),C=function(e,t,n){return e*(1-n)+t*n},j=function(e,t,n,a,r){var i,o=function(e,t,n){return{x:C(e.x,t.x,n),y:C(e.y,t.y,n)}}(e,t,n),c=r?e:t;return(i={},Object(E.a)(i,"row",{x:o.x,y:c.y}),Object(E.a)(i,"column",{y:o.y,x:c.x}),i)[a]},A=function(e,t){return{x:e,y:t}};var N=function(e){return e.reduce((function(e,t){return e.push((e.length&&e[e.length-1]||0)+t),e}),[])},O=function(){function e(t,n,a,r,i){Object(b.a)(this,e),this.start=t,this.end=n,this.direction=a,this.parent=r,this.children=[],this.id=e.id,this.depth=r?r.depth+1:0,e.id+=1,this.createSegments(i)}return Object(k.a)(e,[{key:"createSegments",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.children=[];var a=Object(S.a)(n);if(n.length!==t)for(var r=0;r<t;r+=1)a[r]=1/t;var i=N(a);i.unshift(0),this.segments=t;var o=this.start,c=this.end,l=this.direction;if(t>1)for(var s=0;s<t;s+=1){var u=j(o,c,i[s],l,!0),d=j(o,c,i[s+1],l,!1),h=new e(u,d,"row",this,1);this.children.push(h)}}},{key:"pickSegment",value:function(e){if(!(this.children.length<2)){var t=this.getMajorAxis(),n=A(e.mouseX,e.mouseY),a=this.children.map((function(e){return function(e,t,n){return Math.abs(e[n]-t[n])}(n,e.start,t)})).slice(1),r=a.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]<e[0]?t:e}))[1];this.leftChildIndex=r,this.rightChildIndex=r+1}}},{key:"update",value:function(e){this.moveActiveSegment(e)}},{key:"getMajorAxis",value:function(){var e;return(e={},Object(E.a)(e,"row","x"),Object(E.a)(e,"column","y"),e)[this.direction]}},{key:"moveActiveSegment",value:function(t){var n;if(!(this.children.length<2)){var a,r,i,o=this.getMajorAxis(),c=(n={},Object(E.a)(n,"row",t.mouseX),Object(E.a)(n,"column",t.mouseY),n)[this.direction],l=this.leftChildIndex,s=this.rightChildIndex,u=this.children[l].start[o],d=this.children[s].end[o],h=(a=c,r=u+e.PADDING,i=d-e.PADDING,Math.min(i,Math.max(r,a)));this.children[l].end[o]=h,this.children[s].start[o]=h,this.children[l].children&&(this.children[l].children=[]),this.children[s].children&&(this.children[s].children=[])}}},{key:"setDirection",value:function(e){this.direction=e,this.createSegments(this.segments)}},{key:"setSegments",value:function(e){e<1||this.createSegments(e)}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.end.x-this.start.x,a=this.end.y-this.start.y;t.id===this.id?(e.fill(255,255,0,20),e.stroke(255,0,0)):(e.fill(255,255,255,Math.min(20*this.depth,255)),e.stroke(0)),e.rect(this.start.x,this.start.y,n,a),this.children.forEach((function(n){return n.draw(e,t)}))}},{key:"shouldBeActive",value:function(e,t){return!this.children.length&&function(e,t,n){var a=e.x>=t.x&&e.x<=n.x,r=e.y>=t.y&&e.y<=n.y;return a&&r}(A(e,t),this.start,this.end)}},{key:"findActive",value:function(e,t){return this.shouldBeActive(e,t)?this:this.children.map((function(n){return n.findActive(e,t)})).filter((function(e){return e}))[0]}},{key:"toJson",value:function(){var e=1;if(this.parent){var t=this.parent.getMajorAxis(),n=this.parent.end[t]-this.parent.start[t];e=(this.end[t]-this.start[t])/n}return{id:this.id,flex:e,direction:this.direction,children:this.children.map((function(e){return e.toJson()}))}}},{key:"fromJson",value:function(e){if(void 0!==e.id){this.id=e.id,this.direction=e.direction;var t=e.children.map((function(e){return e.flex}));this.segments=Math.max(e.children.length,1),this.createSegments(this.segments,t),this.children.forEach((function(t,n){t.fromJson(e.children[n])}))}}}]),e}();O.id=0,O.PADDING=10;var I=O,M=function e(){Object(b.a)(this,e)};M.root=null,M.active=null,M.p=null,M.initialize=function(e){M.p=e,M.root=new I(A(0,0),A(e.width,e.height),"row",null,2),M.loadAst(),M.active=M.root},M.mouseDragged=function(){M.active&&M.active.update(M.p)},M.draw=function(){M.root&&M.root.draw(M.p,M.active)},M.toggleDirection=function(){if(M.root&&M.active){var e="column"===M.active.direction?"row":"column";M.active.setDirection(e)}},M.incrementSegments=function(){M.root&&M.active&&M.active.setSegments(M.active.segments+1)},M.decrementSegments=function(){M.root&&M.active&&M.active.setSegments(M.active.segments-1)},M.selectActive=function(){if(M.root){var e=M.p;M.active=M.root.findActive(e.mouseX,e.mouseY)}},M.selectActivesParent=function(){M.active&&M.active.parent&&(M.active=M.active.parent)},M.pickSegment=function(){M.active&&M.active.pickSegment(M.p)},M.dumpAst=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!M.root)return{flex:1,direction:"row",children:[]};var t=M.root.toJson();return e&&localStorage.setItem("ast",JSON.stringify(t)),t},M.loadAst=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(M.root)if(I.id=0,null===e){var t=localStorage.getItem("ast");if(t){var n=JSON.parse(t);M.root.fromJson(n),M.active=M.root}}else M.root.fromJson(e),M.active=M.root};var W=M,D=function(e){var t=window.innerWidth,n=window.innerHeight,a=null;e.setup=function(){var a=e.createCanvas(t,n);W.initialize(e),a.drop(e.gotFile)},e.myCustomRedrawAccordingToNewPropsHandler=function(a){t=a.width,n=a.height,e.resizeCanvas(a.width,a.height),W.initialize(e)},e.draw=function(){a?e.image(a,0,0,e.width,e.height):(e.background(255),e.fill(30),e.noStroke(),e.textSize(24),e.textAlign(e.CENTER),e.text("Drag an image file onto the canvas.",e.width/2,e.height/2),e.text("Reload the page if the image disappears.",e.width/2,e.height/2+50)),W.draw()},e.mouseDragged=function(){W.mouseDragged()},e.mousePressed=function(){W.pickSegment()},e.keyReleased=function(){({87:W.selectActivesParent,83:W.selectActive,68:W.incrementSegments,65:W.decrementSegments,82:W.toggleDirection}[e.keyCode]||function(){return null})()},e.gotFile=function(t){if("image"===t.type){var n=(a=e.createImg(t.data).hide()).width/a.height,r=e.width/n;e.resizeCanvas(e.width,r),W.initialize(e)}else console.log("Not an image file!")}};function P(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var J=d()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center"},drawerWrapper:{flex:2,maxWidth:"300px"},controls:{display:"flex",flexDirection:"column",margin:"10px"}}})),T=function(){var e=J();return r.a.createElement("div",{className:e.controls},r.a.createElement(y.a,null,"Controls"),r.a.createElement(y.a,null,"W: Go up one parent"),r.a.createElement(y.a,null,"S: Select child on cursor"),r.a.createElement(y.a,null,"D: Increase subdivision"),r.a.createElement(y.a,null,"A: Decrease subdivision"),r.a.createElement(y.a,null,"R: Switch direction"))},z=function(){var e=J(),t=.7*function(){var e=Object(a.useState)(P()),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(P())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().width,n=t/16*9;return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.mainWrapper},r.a.createElement(v.a,{sketch:D,width:t,height:n})),r.a.createElement(g.a,{className:e.drawerWrapper},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){W.dumpAst(!0)}},"Save"),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){W.loadAst()}},"Load"),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){localStorage.clear("ast")}},"Clear")),r.a.createElement(x.a,null),r.a.createElement(T,null),r.a.createElement(x.a,null)))},R=function(){return r.a.createElement("div",null,"WIP")},F=n(90),G=n.n(F),H=n(118),L=n(233),B=n(127),U=n(236),X=n(235),Y=n(230),K=n(231),_=n(119),Z=n(120),$=n.n(Z),q=n(91),Q=n.n(q),V=n(121),ee=n.n(V),te=function(e){return"wrapper".concat(e.id)},ne=function e(t){var n,a=te(t),r="\n    ".concat(a,": {\n      display: 'flex',\n      flexDirection: '").concat(t.direction,"',\n      flex: ").concat((n=t.flex,Math.round(100*(n+Number.EPSILON))/100),",\n    }\n  "),i=t.children.map((function(t){return e(t)}));return[r].concat(i)},ae=function(e){var t=ne(e);return"{".concat(t.join(",\n"),"}")},re=function e(t){var n=0===t.children.length?["."]:t.children.map(e),a=te(t);return"\n  <div className={classes.".concat(a,"}>\n    ").concat(n.join(""),"\n  </div>\n  ")},ie=function(e){var t=ae(e),n=re(e);return"\n  import React from 'react';\n  // import PropTypes from 'prop-types';\n\n  import makeStyles from '@material-ui/core/styles/makeStyles';\n\n  import './debug.css'; // For debugging\n\n  const useStyles = makeStyles(".concat(t,");\n\n  const MyComponent = (props) => {\n    const classes = useStyles(props);\n    return (\n      ").concat(n,"\n    )\n  }\n\n  MyComponent.propTypes = {\n    // TODO\n  }\n\n  export default MyComponent;\n  ")},oe=function(){return"\n  import React from 'react';\n  // import { action } from '@storybook/addon-actions';\n  import { withKnobs } from '@storybook/addon-knobs';\n\n  import MyComponent from './MyComponent';\n  \n  export default {\n    title: 'MyComponent',\n    component: MyComponent,\n    decorators: [withKnobs],\n  };\n  \n  export const normal = () => (\n    <MyComponent />\n  );\n\n  normal.story = { name: 'normal' };\n  \n  "},ce=function(){return"\n  * {\n    border: 1px solid black;\n  }\n  "},le=[{value:"REACT_MUI",label:"React + MaterialUI JSS"},{value:"AST",label:"AST"}],se={REACT_MUI:function(e){var t=ie(e),n=oe(e),a=ce(),r={parser:"babel",plugins:[ee.a]};return{language:"jsx",files:{"MyComponent.js":Q.a.format(t,r),"MyComponent.stories.js":Q.a.format(n,r),"debug.css":a}}},AST:function(e){return{language:"json",files:{"ast.json":JSON.stringify(e,null,2)}}}},ue=d()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center",backgroundColor:"black"},syntaxHighlighter:{width:"100%"},drawerWrapper:{flex:2,maxWidth:"300px",padding:"1%"},fileSelector:{},formControl:{display:"flex"}}})),de=function(e){var t=e.fileNames,n=e.currentFileIndex,a=e.setCurrentFileIndex,i=ue(),o=t.map((function(e){return r.a.createElement(m.a,{key:e,label:e})}));return r.a.createElement(h.a,{orientation:"vertical",value:n,onChange:function(e,t){return a(t)},className:i.fileSelector},o)},he=function(e){var t=e.pluginOptions,n=e.pluginType,a=e.setPluginType,i=ue(),o=t.map((function(e){return r.a.createElement(X.a,{key:e.value,value:e.value},e.label)}));return r.a.createElement(Y.a,{className:i.formControl},r.a.createElement(U.a,{id:"plugin-selector"},"Select Plugin"),r.a.createElement(K.a,{labelId:"plugin-selector",id:"plugin-selector",value:n,onChange:function(e){return a(e.target.value)}},o))},me=function(){var e=ue(),t=JSON.parse(localStorage.getItem("ast")||'{"message":"No ast found"}'),n=Object(a.useState)(le[0].value),i=Object(c.a)(n,2),o=i[0],l=i[1],s=Object(a.useState)(0),u=Object(c.a)(s,2),d=u[0],h=u[1],m=(0,se[o])(t),f=Object.keys(m.files),p=m.files[f[d]]||"";Object(a.useEffect)((function(){h(0)}),[o]);var v=function(){var e=Object(H.a)(G.a.mark((function e(){var n,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new _,f.forEach((function(e){n.file(e,m.files[e])})),n.file("ast.json",JSON.stringify(t)),e.next=5,n.generateAsync({type:"blob"});case 5:a=e.sent,$.a.saveAs(a,"code.zip");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.mainWrapper},r.a.createElement(L.a,{showLineNumbers:!0,language:m.language,style:B.a,className:e.syntaxHighlighter},p)),r.a.createElement(g.a,{className:e.drawerWrapper},r.a.createElement(w.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:v},"Download ZIP"),r.a.createElement(he,{pluginOptions:le,pluginType:o,setPluginType:l}),r.a.createElement(de,{fileNames:f,currentFileIndex:d,setCurrentFileIndex:h}),r.a.createElement(x.a,null)))};function fe(e){var t=e.children,n=e.value,a=e.index;return r.a.createElement("div",{role:"tabpanel",hidden:n!==a,id:"tabpanel-".concat(a),"aria-labelledby":"tab-".concat(a)},n===a&&r.a.createElement(f.a,{p:3},t))}var pe=d()((function(e){return{wrapper:{flexGrow:1,backgroundColor:e.palette.background.paper,height:"100vh"},tabWrapper:{backgroundColor:"#FF8300",color:"WHITE"},tabPannelWrapper:{}}})),ve=function(){var e=pe(),t=Number.parseInt(s.a.parse(window.location.search).tab,10)||0,n=Object(a.useState)(t),i=Object(c.a)(n,2),o=i[0],l=i[1],u=["Segmentation","Post Processing","Code Generation"].map((function(e){return r.a.createElement(m.a,{label:e,key:e,id:e,"aria-controls":e})}));return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.tabWrapper},r.a.createElement(h.a,{value:o,onChange:function(e,t){var n=W.dumpAst();localStorage.setItem("ast",JSON.stringify(n)),window.history.pushState({},"","?tab=".concat(t)),l(t)},"aria-label":"Tabs"},u)),r.a.createElement("div",{className:e.tabPannelWrapper},r.a.createElement(fe,{value:o,index:0},r.a.createElement(z,null)),r.a.createElement(fe,{value:o,index:1},r.a.createElement(R,null)),r.a.createElement(fe,{value:o,index:2},r.a.createElement(me,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,209,210]]]);
//# sourceMappingURL=main.b0a3338f.chunk.js.map