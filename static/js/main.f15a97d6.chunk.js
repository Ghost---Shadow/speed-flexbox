(this["webpackJsonpspeed-flexbox"]=this["webpackJsonpspeed-flexbox"]||[]).push([[0],{140:function(e,t,n){e.exports=n(195)},145:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),c=(n(145),n(37)),s=n(115),l=n.n(s),u=n(42),h=n.n(u),d=n(232),f=n(229),m=n(234),p=n(116),v=n.n(p),g=n(227),y=n(225),b=n(226),x=n(228),E=n(72),w=n(12),S=n(128),O=n(117),j=function(e,t,n){return e*(1-n)+t*n},k=function(e,t,n,a,r){var i,o=function(e,t,n){return{x:j(e.x,t.x,n),y:j(e.y,t.y,n)}}(e,t,n),c=r?e:t;return(i={},Object(w.a)(i,"row",{x:o.x,y:c.y}),Object(w.a)(i,"column",{y:o.y,x:c.x}),i)[a]},T=function(e,t){return{x:e,y:t}};var C=function(e){return e.reduce((function(e,t){return e.push((e.length&&e[e.length-1]||0)+t),e}),[])},N=function(){function e(t,n,a,r,i){Object(E.a)(this,e),this.start=t,this.end=n,this.direction=a,this.parent=r,this.children=[],this.ghosts=[],this.id=e.id,this.depth=r?r.depth+1:0,e.id+=1,this.createSegments(i)}return Object(O.a)(e,[{key:"createSegments",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.children=[];var a=Object(S.a)(n);if(n.length!==t)for(var r=0;r<t;r+=1)a[r]=1/t;var i=C(a);i.unshift(0),this.segments=t;var o=this.start,c=this.end,s=this.direction;if(t>1)for(var l=0;l<t;l+=1){var u=k(o,c,i[l],s,!0),h=k(o,c,i[l+1],s,!1),d=new e(u,h,"row",this,1);this.children.push(d)}}},{key:"pickSegment",value:function(e){if(!(this.children.length<2)){var t=this.getMajorAxis(),n=T(e.mouseX,e.mouseY),a=this.children.map((function(e){return function(e,t,n){return Math.abs(e[n]-t[n])}(n,e.start,t)})).slice(1),r=a.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]<e[0]?t:e}))[1];this.leftChildIndex=r,this.rightChildIndex=r+1}}},{key:"update",value:function(e){this.moveActiveSegment(e)}},{key:"getMajorAxis",value:function(){var e;return(e={},Object(w.a)(e,"row","x"),Object(w.a)(e,"column","y"),e)[this.direction]}},{key:"moveActiveSegment",value:function(t){var n;if(!(this.children.length<2)){var a,r,i,o=this.getMajorAxis(),c=(n={},Object(w.a)(n,"row",t.mouseX),Object(w.a)(n,"column",t.mouseY),n)[this.direction],s=this.leftChildIndex,l=this.rightChildIndex,u=this.children[s].start[o],h=this.children[l].end[o],d=(a=c,r=u+e.PADDING,i=h-e.PADDING,Math.min(i,Math.max(r,a)));this.children[s].end[o]=d,this.children[l].start[o]=d,this.children[s].children&&(this.children[s].children=[]),this.children[l].children&&(this.children[l].children=[])}}},{key:"setDirection",value:function(e){this.direction=e,this.createSegments(this.segments)}},{key:"setSegments",value:function(e){e<1||(this.ghosts=[],this.createSegments(e))}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.end.x-this.start.x,a=this.end.y-this.start.y;t.id===this.id?(e.fill(255,255,0,20),e.stroke(255,0,0)):(e.fill(255,255,255,Math.min(20*this.depth,255)),e.stroke(0)),e.rect(this.start.x,this.start.y,n,a),this.children.forEach((function(n){return n.draw(e,t)})),this.drawGhosts(e)}},{key:"drawGhosts",value:function(e){var t,n=Math.min(14,this.end.y-this.start.y-2),a=(this.start.x+this.end.x)/2,r=(this.start.y+this.end.y)/2,i=(t={},Object(w.a)(t,"LABEL_GHOST","L"),Object(w.a)(t,"BUTTON_GHOST","B"),Object(w.a)(t,"INPUT_FIELD_GHOST","I"),t),o=this.ghosts.map((function(e){return"".concat(i[e.type]).concat(e.id)}));e.textSize(n),e.text(o.join(","),a,r)}},{key:"shouldBeActive",value:function(e,t){return!this.children.length&&function(e,t,n){var a=e.x>=t.x&&e.x<=n.x,r=e.y>=t.y&&e.y<=n.y;return a&&r}(T(e,t),this.start,this.end)}},{key:"findActive",value:function(e,t){return this.shouldBeActive(e,t)?this:this.children.map((function(n){return n.findActive(e,t)})).filter((function(e){return e}))[0]}},{key:"popGhost",value:function(){this.ghosts.pop()}},{key:"pushGhost",value:function(t){this.children.length||(e.ghostId+=1,this.ghosts.push({id:e.ghostId,type:t}))}},{key:"toJson",value:function(){var e=1;if(this.parent){var t=this.parent.getMajorAxis(),n=this.parent.end[t]-this.parent.start[t];e=(this.end[t]-this.start[t])/n}return{id:this.id,flex:e,direction:this.direction,children:this.children.map((function(e){return e.toJson()})),ghosts:this.ghosts}}},{key:"fromJson",value:function(e){if(void 0!==e.id){this.id=e.id,this.direction=e.direction;var t=e.children.map((function(e){return e.flex}));this.segments=Math.max(e.children.length,1),this.createSegments(this.segments,t),this.children.forEach((function(t,n){t.fromJson(e.children[n])})),this.ghosts=e.ghosts}}}]),e}();N.id=0,N.ghostId=0,N.PADDING=10;var I=N,A=function e(){Object(E.a)(this,e)};A.root=null,A.active=null,A.p=null,A.initialize=function(e){A.p=e,A.root=new I(T(0,0),T(e.width,e.height),"row",null,2),A.loadAst(),A.active=A.root},A.mouseDragged=function(){A.active&&A.active.update(A.p)},A.draw=function(){A.root&&A.root.draw(A.p,A.active)},A.toggleDirection=function(){if(A.root&&A.active){var e="column"===A.active.direction?"row":"column";A.active.setDirection(e)}},A.incrementSegments=function(){A.root&&A.active&&A.active.setSegments(A.active.segments+1)},A.decrementSegments=function(){A.root&&A.active&&A.active.setSegments(A.active.segments-1)},A.selectActive=function(){if(A.root){var e=A.p;A.active=A.root.findActive(e.mouseX,e.mouseY)}},A.selectActivesParent=function(){A.active&&A.active.parent&&(A.active=A.active.parent)},A.pickSegment=function(){A.active&&A.active.pickSegment(A.p)},A.popGhost=function(){A.active&&A.active.popGhost()},A.pushGhost=function(e){return function(){A.active&&A.active.pushGhost(e)}},A.dumpAst=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!A.root)return{flex:1,direction:"row",children:[]};var t=A.root.toJson();return e&&localStorage.setItem("ast",JSON.stringify(t)),t},A.loadAst=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(A.root)if(I.id=0,null===e){var t=localStorage.getItem("ast");if(t){var n=JSON.parse(t);A.root.fromJson(n),A.active=A.root}}else A.root.fromJson(e),A.active=A.root};var G=A,D=function(e){var t=window.innerWidth,n=window.innerHeight,a=null;e.setup=function(){var a=e.createCanvas(t,n);G.initialize(e),a.drop(e.gotFile)},e.myCustomRedrawAccordingToNewPropsHandler=function(a){t=a.width,n=a.height,e.resizeCanvas(a.width,a.height),G.initialize(e)},e.draw=function(){a?e.image(a,0,0,e.width,e.height):(e.background(255),e.fill(30),e.noStroke(),e.textSize(24),e.textAlign(e.CENTER),e.text("Drag an image file onto the canvas.",e.width/2,e.height/2)),G.draw()},e.mouseDragged=function(){G.mouseDragged()},e.mousePressed=function(){G.pickSegment()},e.keyReleased=function(){({87:G.selectActivesParent,83:G.selectActive,68:G.incrementSegments,65:G.decrementSegments,82:G.toggleDirection,81:G.popGhost,49:G.pushGhost("LABEL_GHOST"),50:G.pushGhost("BUTTON_GHOST"),51:G.pushGhost("INPUT_FIELD_GHOST")}[e.keyCode]||function(){return null})()},e.gotFile=function(t){"image"===t.type?e.createImg(t.data,"",(function(t){(a=t).hide();var n=a.width/a.height,r=e.width/n;e.resizeCanvas(e.width,r||e.height),G.initialize(e)})):console.log("Not an image file!")}};function P(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var M=h()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center"},drawerWrapper:{flex:2,maxWidth:"300px"},controls:{display:"flex",flexDirection:"column",margin:"10px"}}})),L=function(){var e=M();return r.a.createElement("div",{className:e.controls},r.a.createElement(y.a,null,"Controls"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"W: Go up one parent"),r.a.createElement(y.a,null,"S: Select child on cursor"),r.a.createElement(y.a,null,"D: Increase subdivision"),r.a.createElement(y.a,null,"A: Decrease subdivision"),r.a.createElement(y.a,null,"R: Switch direction"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"Ghosts"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"Q: Pop Ghost"),r.a.createElement(y.a,null,"1: Push Label Ghost"),r.a.createElement(y.a,null,"2: Push Button Ghost"),r.a.createElement(y.a,null,"3: Push Input Field Ghost"))},_=function(){var e=M(),t=.7*function(){var e=Object(a.useState)(P()),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(P())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().width,n=t/16*9;return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.mainWrapper},r.a.createElement(v.a,{sketch:D,width:t,height:n})),r.a.createElement(g.a,{className:e.drawerWrapper},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){G.dumpAst(!0)}},"Save"),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){G.loadAst()}},"Load"),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){localStorage.clear("ast")}},"Clear")),r.a.createElement(b.a,null),r.a.createElement(L,null),r.a.createElement(b.a,null)))},H=n(90),W=n.n(H),B=n(118),J=n(233),F=n(127),U=n(236),z=n(235),R=n(230),X=n(231),Y=n(119),q=n(120),K=n.n(q),Q=n(91),Z=n.n(Q),$=n(121),V=n.n($),ee=function(e){return"wrapper".concat(e.id)},te=function(e){return"ghost".concat(e.id)},ne=function(e){var t;return(t={},Object(w.a)(t,"LABEL_GHOST","prop".concat(e.id)),Object(w.a)(t,"BUTTON_GHOST","prop".concat(e.id)),Object(w.a)(t,"INPUT_FIELD_GHOST",null),t)[e.type]},ae=function(e){var t=te(e);return"\n  ".concat(t,": {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  }\n  ")},re=function e(t){var n,a=ee(t),r="\n    ".concat(a,": {\n      display: 'flex',\n      flexDirection: '").concat(t.direction,"',\n      flex: ").concat((n=t.flex,Math.round(100*(n+Number.EPSILON))/100),",\n    }\n  "),i=t.ghosts.map(ae),o=t.children.map((function(t){return e(t)}));return[r].concat(i).concat(o)},ie=function(e){var t=re(e);return"{".concat(t.join(",\n"),"}")},oe=function(e){var t=te(e),n=ne(e);return"\n  <div className={classes.".concat(t,"}>\n    {").concat(n,"}\n  </div>")},ce=function(e){var t=te(e),n=ne(e);return'\n  <button type="button" className={classes.'.concat(t,"} onClick={").concat(n,"}>\n    Button ").concat(e.id,"\n  </button>\n  ")},se=function(e){var t=te(e);return'\n  <input type="text" className={classes.'.concat(t,"} onChange={() => 'TODO'} value=\"TODO\" />\n  ")},le=function e(t){var n,a=(n={},Object(w.a)(n,"LABEL_GHOST",oe),Object(w.a)(n,"BUTTON_GHOST",ce),Object(w.a)(n,"INPUT_FIELD_GHOST",se),n),r=t.ghosts.map((function(e){return a[e.type](e)})),i=r.length?r:["."],o=0===t.children.length?i:t.children.map(e),c=ee(t);return"\n  <div className={classes.".concat(c,"}>\n    ").concat(o.join(""),"\n  </div>\n  ")},ue=function(e){var t=function e(t){var n=t.ghosts.map(ne).filter((function(e){return e})),a=t.children.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]);return n.concat(a)}(e);return t.length?"{".concat(t.join(",\n"),"}"):""},he=function(e){var t=ne(e);return"".concat(t,": PropTypes.string.isRequired")},de=function(e){var t=ne(e);return"".concat(t,": PropTypes.func.isRequired")},fe=function(e){var t=function e(t){var n,a=(n={},Object(w.a)(n,"LABEL_GHOST",he),Object(w.a)(n,"BUTTON_GHOST",de),Object(w.a)(n,"INPUT_FIELD_GHOST",(function(){return null})),n),r=t.ghosts.map((function(e){return a[e.type](e)})).filter((function(e){return e})),i=t.children.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]);return r.concat(i)}(e);return t.length?"".concat(t.join(",\n")):""},me=function(e){var t=ie(e),n=le(e),a=ue(e),r=fe(e);return"\n  import React from 'react';\n  import PropTypes from 'prop-types';\n\n  import makeStyles from '@material-ui/core/styles/makeStyles';\n\n  import './debug.css'; // For debugging\n\n  const useStyles = makeStyles(".concat(t,");\n\n  const MyComponent = (").concat(a,") => {\n    const classes = useStyles(").concat(a,");\n    return (\n      ").concat(n,"\n    )\n  }\n\n  MyComponent.propTypes = {\n    ").concat(r,"\n  }\n\n  export default MyComponent;\n  ")},pe=function(){return"\n  import React from 'react';\n  // import { action } from '@storybook/addon-actions';\n  import { withKnobs } from '@storybook/addon-knobs';\n\n  import MyComponent from './MyComponent';\n  \n  export default {\n    title: 'MyComponent',\n    component: MyComponent,\n    decorators: [withKnobs],\n  };\n  \n  export const normal = () => (\n    <MyComponent />\n  );\n\n  normal.story = { name: 'normal' };\n  \n  "},ve=function(){return"\n  * {\n    border: 1px solid black;\n  }\n  "},ge=[{value:"REACT_MUI",label:"React + MaterialUI JSS"},{value:"AST",label:"AST"}],ye={REACT_MUI:function(e){var t=me(e),n=pe(e),a=ve(),r={parser:"babel",plugins:[V.a]};return{language:"jsx",files:{"MyComponent.js":Z.a.format(t,r),"MyComponent.stories.js":Z.a.format(n,r),"debug.css":a}}},AST:function(e){return{language:"json",files:{"ast.json":JSON.stringify(e,null,2)}}}},be=h()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center",backgroundColor:"black"},syntaxHighlighter:{width:"100%"},drawerWrapper:{flex:2,maxWidth:"300px",padding:"1%"},fileSelector:{},formControl:{display:"flex"}}})),xe=function(e){var t=e.fileNames,n=e.currentFileIndex,a=e.setCurrentFileIndex,i=be(),o=t.map((function(e){return r.a.createElement(f.a,{key:e,label:e})}));return r.a.createElement(d.a,{orientation:"vertical",value:n,onChange:function(e,t){return a(t)},className:i.fileSelector},o)},Ee=function(e){var t=e.pluginOptions,n=e.pluginType,a=e.setPluginType,i=be(),o=t.map((function(e){return r.a.createElement(z.a,{key:e.value,value:e.value},e.label)}));return r.a.createElement(R.a,{className:i.formControl},r.a.createElement(U.a,{id:"plugin-selector"},"Select Plugin"),r.a.createElement(X.a,{labelId:"plugin-selector",id:"plugin-selector",value:n,onChange:function(e){return a(e.target.value)}},o))},we=function(){var e=be(),t=JSON.parse(localStorage.getItem("ast")||'{"message":"No ast found"}'),n=Object(a.useState)(ge[0].value),i=Object(c.a)(n,2),o=i[0],s=i[1],l=Object(a.useState)(0),u=Object(c.a)(l,2),h=u[0],d=u[1],f=(0,ye[o])(t),m=Object.keys(f.files),p=f.files[m[h]]||"";Object(a.useEffect)((function(){d(0)}),[o]);var v=function(){var e=Object(B.a)(W.a.mark((function e(){var n,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Y,m.forEach((function(e){n.file(e,f.files[e])})),n.file("ast.json",JSON.stringify(t)),e.next=5,n.generateAsync({type:"blob"});case 5:a=e.sent,K.a.saveAs(a,"code.zip");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.mainWrapper},r.a.createElement(J.a,{showLineNumbers:!0,language:f.language,style:F.a,className:e.syntaxHighlighter},p)),r.a.createElement(g.a,{className:e.drawerWrapper},r.a.createElement(x.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:function(){return navigator.clipboard.writeText(p)}},"Copy to Clipboard"),r.a.createElement(x.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:v},"Download ZIP"),r.a.createElement(Ee,{pluginOptions:ge,pluginType:o,setPluginType:s}),r.a.createElement(xe,{fileNames:m,currentFileIndex:h,setCurrentFileIndex:d}),r.a.createElement(b.a,null)))};function Se(e){var t=e.children,n=e.value,a=e.index;return r.a.createElement("div",{role:"tabpanel",hidden:n!==a,id:"tabpanel-".concat(a),"aria-labelledby":"tab-".concat(a)},n===a&&r.a.createElement(m.a,{p:3},t))}var Oe=h()((function(e){return{wrapper:{flexGrow:1,backgroundColor:e.palette.background.paper,height:"100vh"},tabWrapper:{backgroundColor:"#FF8300",color:"WHITE"},tabPannelWrapper:{}}})),je=function(){var e=Oe(),t=Number.parseInt(l.a.parse(window.location.search).tab,10)||0,n=Object(a.useState)(t),i=Object(c.a)(n,2),o=i[0],s=i[1],u=["Segmentation","Code Generation"].map((function(e){return r.a.createElement(f.a,{label:e,key:e,id:e,"aria-controls":e})}));return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.tabWrapper},r.a.createElement(d.a,{value:o,onChange:function(e,t){var n=G.dumpAst();localStorage.setItem("ast",JSON.stringify(n)),window.history.pushState({},"","?tab=".concat(t)),s(t)},"aria-label":"Tabs"},u)),r.a.createElement("div",{className:e.tabPannelWrapper},r.a.createElement(Se,{value:o,index:0},r.a.createElement(_,null)),r.a.createElement(Se,{value:o,index:1},r.a.createElement(we,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,209,210]]]);
//# sourceMappingURL=main.f15a97d6.chunk.js.map