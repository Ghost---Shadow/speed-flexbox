(this["webpackJsonpspeed-flexbox"]=this["webpackJsonpspeed-flexbox"]||[]).push([[0],{140:function(t,e,n){t.exports=n(195)},145:function(t,e,n){},195:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),c=(n(145),n(37)),s=n(116),l=n.n(s),u=n(42),h=n.n(u),d=n(232),f=n(229),m=n(234),p=n(117),v=n.n(p),g=n(227),y=n(225),b=n(226),S=n(228),O=n(72),x=n(8),E=n(80),w=n(118),T=function(t,e,n){return t*(1-n)+e*n},j=function(t,e,n,a,r){var i,o=function(t,e,n){return{x:T(t.x,e.x,n),y:T(t.y,e.y,n)}}(t,e,n),c=r?t:e;return(i={},Object(x.a)(i,"row",{x:o.x,y:c.y}),Object(x.a)(i,"column",{y:o.y,x:c.x}),i)[a]},k=function(t,e){return{x:t,y:e}};var N=function(t){return t.reduce((function(t,e){return t.push((t.length&&t[t.length-1]||0)+e),t}),[])},I=function(){function t(e,n,a,r,i){Object(O.a)(this,t),this.start=e,this.end=n,this.direction=a,this.parent=r,this.children=[],this.ghosts=[],this.id=t.id,this.depth=r?r.depth+1:0,t.id+=1,this.createSegments(i)}return Object(w.a)(t,[{key:"createSegments",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.children=[];var a=Object(E.a)(n);if(n.length!==e)for(var r=0;r<e;r+=1)a[r]=1/e;var i=N(a);i.unshift(0),this.segments=e;var o=this.start,c=this.end,s=this.direction;if(e>1)for(var l=0;l<e;l+=1){var u=j(o,c,i[l],s,!0),h=j(o,c,i[l+1],s,!1),d=new t(u,h,"row",this,1);this.children.push(d)}}},{key:"pickSegment",value:function(t){if(!(this.children.length<2)){var e=this.getMajorAxis(),n=k(t.mouseX,t.mouseY),a=this.children.map((function(t){return function(t,e,n){return Math.abs(t[n]-e[n])}(n,t.start,e)})).slice(1),r=a.map((function(t,e){return[t,e]})).reduce((function(t,e){return e[0]<t[0]?e:t}))[1];this.leftChildIndex=r,this.rightChildIndex=r+1}}},{key:"update",value:function(t){this.moveActiveSegment(t)}},{key:"getMajorAxis",value:function(){var t;return(t={},Object(x.a)(t,"row","x"),Object(x.a)(t,"column","y"),t)[this.direction]}},{key:"moveActiveSegment",value:function(e){var n;if(!(this.children.length<2)){var a,r,i,o=this.getMajorAxis(),c=(n={},Object(x.a)(n,"row",e.mouseX),Object(x.a)(n,"column",e.mouseY),n)[this.direction],s=this.leftChildIndex,l=this.rightChildIndex,u=this.children[s].start[o],h=this.children[l].end[o],d=(a=c,r=u+t.PADDING,i=h-t.PADDING,Math.min(i,Math.max(r,a)));this.children[s].end[o]=d,this.children[l].start[o]=d,this.children[s].children&&(this.children[s].children=[]),this.children[l].children&&(this.children[l].children=[])}}},{key:"setDirection",value:function(t){this.direction=t,this.createSegments(this.segments)}},{key:"setSegments",value:function(t){t<1||(this.ghosts=[],this.createSegments(t))}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.end.x-this.start.x,a=this.end.y-this.start.y;e.id===this.id?(t.fill(255,255,0,20),t.stroke(255,0,0)):(t.fill(255,255,255,Math.min(20*this.depth,255)),t.stroke(0)),t.rect(this.start.x,this.start.y,n,a),this.children.forEach((function(n){return n.draw(t,e)})),this.drawGhosts(t)}},{key:"drawGhosts",value:function(t){var e,n=Math.min(14,this.end.y-this.start.y-2),a=(this.start.x+this.end.x)/2,r=(this.start.y+this.end.y)/2,i=(e={},Object(x.a)(e,"LABEL_GHOST","L"),Object(x.a)(e,"BUTTON_GHOST","B"),Object(x.a)(e,"INPUT_FIELD_GHOST","I"),e),o=this.ghosts.map((function(t){return"".concat(i[t.type]).concat(t.id)}));t.textSize(n),t.text(o.join(","),a,r)}},{key:"shouldBeActive",value:function(t,e){return!this.children.length&&function(t,e,n){var a=t.x>=e.x&&t.x<=n.x,r=t.y>=e.y&&t.y<=n.y;return a&&r}(k(t,e),this.start,this.end)}},{key:"findActive",value:function(t,e){return this.shouldBeActive(t,e)?this:this.children.map((function(n){return n.findActive(t,e)})).filter((function(t){return t}))[0]}},{key:"popGhost",value:function(){this.ghosts.pop()}},{key:"pushGhost",value:function(e){this.children.length||(t.ghostId+=1,this.ghosts.push({id:t.ghostId,type:e}))}},{key:"toJson",value:function(t){var e=1;if(this.parent){var n=this.parent.getMajorAxis(),a=this.parent.end[n]-this.parent.start[n];e=(this.end[n]-this.start[n])/a}return{id:this.id,flex:e,direction:this.direction,children:this.children.map((function(e){return e.toJson(t)})),ghosts:this.ghosts,height:(this.end.y-this.start.y)/t,width:(this.end.x-this.start.x)/t,isRoot:!this.parent||void 0}}},{key:"fromJson",value:function(t){if(void 0!==t.id){this.id=t.id,this.direction=t.direction;var e=t.children.map((function(t){return t.flex}));this.segments=Math.max(t.children.length,1),this.createSegments(this.segments,e),this.children.forEach((function(e,n){e.fromJson(t.children[n])})),this.ghosts=t.ghosts}}}]),t}();I.id=0,I.ghostId=0,I.PADDING=10;var G=I,C=function t(){Object(O.a)(this,t)};C.root=null,C.active=null,C.p=null,C.scaleFactor=1,C.initialize=function(t,e){G.id=0,C.p=t,C.root=new G(k(0,0),k(t.width,t.height),"row",null,2),C.loadAst(),G.id=function t(e){var n=e.id,a=e.children.map(t);return Math.max.apply(Math,[n].concat(Object(E.a)(a)))}(C.root)+1,C.active=C.root,C.scaleFactor=e},C.mouseDragged=function(){C.active&&C.active.update(C.p)},C.draw=function(){C.root&&C.root.draw(C.p,C.active)},C.toggleDirection=function(){if(C.root&&C.active){var t="column"===C.active.direction?"row":"column";C.active.setDirection(t)}},C.incrementSegments=function(){C.root&&C.active&&C.active.setSegments(C.active.segments+1)},C.decrementSegments=function(){C.root&&C.active&&C.active.setSegments(C.active.segments-1)},C.selectActive=function(){if(C.root){var t=C.p;C.active=C.root.findActive(t.mouseX,t.mouseY)}},C.selectActivesParent=function(){C.active&&C.active.parent&&(C.active=C.active.parent)},C.pickSegment=function(){C.active&&C.active.pickSegment(C.p)},C.popGhost=function(){C.active&&C.active.popGhost()},C.pushGhost=function(t){return function(){C.active&&C.active.pushGhost(t)}},C.dumpAst=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!C.root)return{flex:1,direction:"row",children:[]};var e=C.root.toJson(C.scaleFactor);return t&&localStorage.setItem("AST",JSON.stringify(e)),e},C.loadAst=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(C.root)if(null===t){var e=localStorage.getItem("AST");if(e){var n=JSON.parse(e);C.root.fromJson(n),C.active=C.root}}else C.root.fromJson(t),C.active=C.root};var A=C,_=function(t){var e=window.innerWidth,n=window.innerHeight,a=null;t.setup=function(){var a=t.createCanvas(e,n);A.initialize(t),a.drop(t.gotFile)},t.myCustomRedrawAccordingToNewPropsHandler=function(a){e=a.width,n=a.height,t.resizeCanvas(a.width,a.height),A.initialize(t)},t.draw=function(){a?t.image(a,0,0,t.width,t.height):(t.background(255),t.fill(30),t.noStroke(),t.textSize(24),t.textAlign(t.CENTER),t.text("Drag an image file onto the canvas.",t.width/2,t.height/2)),A.draw()},t.mouseDragged=function(){A.mouseDragged()},t.mousePressed=function(){A.pickSegment()},t.keyReleased=function(){({87:A.selectActivesParent,83:A.selectActive,68:A.incrementSegments,65:A.decrementSegments,82:A.toggleDirection,81:A.popGhost,49:A.pushGhost("LABEL_GHOST"),50:A.pushGhost("BUTTON_GHOST"),51:A.pushGhost("INPUT_FIELD_GHOST")}[t.keyCode]||function(){return null})()},t.gotFile=function(e){"image"===e.type?t.createImg(e.data,"",(function(e){(a=e).hide();var n=a.width/a.height,r=t.width/n,i=t.width/a.width;t.resizeCanvas(t.width,r||t.height),A.initialize(t,i)})):console.log("Not an image file!")}};function L(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var H=h()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center"},drawerWrapper:{flex:2,maxWidth:"300px"},controls:{display:"flex",flexDirection:"column",margin:"10px"}}})),P=function(){var t=H();return r.a.createElement("div",{className:t.controls},r.a.createElement(y.a,null,"Controls"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"W: Go up one parent"),r.a.createElement(y.a,null,"S: Select child on cursor"),r.a.createElement(y.a,null,"D: Increase subdivision"),r.a.createElement(y.a,null,"A: Decrease subdivision"),r.a.createElement(y.a,null,"R: Switch direction"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"Ghosts"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"Q: Pop Ghost"),r.a.createElement(y.a,null,"1: Push Label Ghost"),r.a.createElement(y.a,null,"2: Push Button Ghost"),r.a.createElement(y.a,null,"3: Push Input Field Ghost"))},D=function(){var t=H(),e=.7*function(){var t=Object(a.useState)(L()),e=Object(c.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){function t(){r(L())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}().width,n=e/16*9;return r.a.createElement("div",{className:t.wrapper},r.a.createElement("div",{className:t.mainWrapper},r.a.createElement(v.a,{sketch:_,width:e,height:n})),r.a.createElement(g.a,{className:t.drawerWrapper},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){A.dumpAst(!0)}},"Save"),r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){A.loadAst()}},"Load"),r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("AST");var t=A.p,e=A.scaleFactor;A.initialize(t,e)}},"Clear")),r.a.createElement(b.a,null),r.a.createElement(P,null),r.a.createElement(b.a,null)))},M=n(91),B=n.n(M),U=n(119),F=n(233),W=n(128),J=n(236),R=n(235),z=n(230),X=n(231),Y=n(120),q=n(121),K=n.n(q),Q=n(92),Z=n.n(Q),$=n(122),V=n.n($),tt=function(t){return"".concat(t).padStart(2,"0")},et=function(t){return"wrapper".concat(tt(t.id))},nt=function(t){return"ghost".concat(tt(t.id))},at=function(t){var e;return(e={},Object(x.a)(e,"LABEL_GHOST","prop".concat(tt(t.id))),Object(x.a)(e,"BUTTON_GHOST","prop".concat(tt(t.id))),Object(x.a)(e,"INPUT_FIELD_GHOST",null),e)[t.type]},rt=function(t){var e;return(e={},Object(x.a)(e,"LABEL_GHOST",null),Object(x.a)(e,"BUTTON_GHOST",null),Object(x.a)(e,"INPUT_FIELD_GHOST",{value:"ghostState".concat(tt(t.id)),setter:"setGhostState".concat(tt(t.id))}),e)[t.type]},it=function(t){return Math.round(100*(t+Number.EPSILON))/100},ot=function(t){return t/16},ct=function(t){var e=nt(t);return"\n  ".concat(e,":{\n    backgroundColor: 'transparent'\n  }\n")},st=function(t){var e=nt(t);return"\n  ".concat(e,": {\n    flex: 1,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  }\n  ")},lt=function(t){return(Object(x.a)({},"BUTTON_GHOST",ct)[t.type]||st)(t)},ut=function t(e){var n=et(e),a="\n    ".concat(n,": {\n      display: 'flex',\n      flexDirection: '").concat(e.direction,"',\n      flex: ").concat(it(e.flex),",\n      ").concat(function(t){return t.isRoot&&t.width&&t.height?"minWidth: '".concat(it(ot(t.width)),"rem',\n    minHeight: '").concat(it(ot(t.height)),"rem',\n  "):""}(e),"\n    }\n  "),r=e.ghosts.map(lt),i=e.children.map((function(e){return t(e)}));return[a].concat(r).concat(i)},ht=function(t){var e=ut(t);return"{".concat(e.join(",\n"),"}")},dt=function(t){var e=nt(t),n=at(t);return"\n  <div className={classes.".concat(e,"}>\n    {").concat(n,"}\n  </div>")},ft=function(t){var e=nt(t),n=at(t);return'\n  <button type="button" className={classes.'.concat(e,"} onClick={").concat(n,"}>\n    Button ").concat(t.id,"\n  </button>\n  ")},mt=function(t){var e=nt(t),n=rt(t),a=n.value,r=n.setter;return'\n    <input \n      type="text"\n      className={classes.'.concat(e,"} \n      onChange={(e) => ").concat(r,"(e.target.value)} \n      value={").concat(a,"} \n    />\n  ")},pt=function t(e){var n,a=(n={},Object(x.a)(n,"LABEL_GHOST",dt),Object(x.a)(n,"BUTTON_GHOST",ft),Object(x.a)(n,"INPUT_FIELD_GHOST",mt),n),r=e.ghosts.map((function(t){return a[t.type](t)})),i=r.length?r:["."],o=0===e.children.length?i:e.children.map(t),c=et(e);return"\n  <div className={classes.".concat(c,"}>\n    ").concat(o.join(""),"\n  </div>\n  ")},vt=function(t){var e=function t(e){var n=e.ghosts.map(at).filter((function(t){return t})),a=e.children.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)}),[]);return n.concat(a)}(t);return e.length?"{".concat(e.join(",\n"),"}"):""},gt=function(t){var e=at(t);return"".concat(e,": PropTypes.string.isRequired")},yt=function(t){var e=at(t);return"".concat(e,": PropTypes.func.isRequired")},bt=function(t){var e=function t(e){var n,a=(n={},Object(x.a)(n,"LABEL_GHOST",gt),Object(x.a)(n,"BUTTON_GHOST",yt),Object(x.a)(n,"INPUT_FIELD_GHOST",(function(){return null})),n),r=e.ghosts.map((function(t){return a[t.type](t)})).filter((function(t){return t})),i=e.children.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)}),[]);return r.concat(i)}(t);return e.length?"".concat(e.join(",\n")):""},St=function(t){var e=rt(t),n=e.value,a=e.setter;return"const [".concat(n,", ").concat(a,"] = React.useState('')")},Ot=function(t){var e=function t(e){var n,a=(n={},Object(x.a)(n,"LABEL_GHOST",(function(){return null})),Object(x.a)(n,"BUTTON_GHOST",(function(){return null})),Object(x.a)(n,"INPUT_FIELD_GHOST",St),n),r=e.ghosts.map((function(t){return a[t.type](t)})).filter((function(t){return t})),i=e.children.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)}),[]);return r.concat(i)}(t);return e.length?"".concat(e.join(";\n")):""},xt=function(t){var e=ht(t),n=pt(t),a=vt(t),r=bt(t),i=Ot(t);return"\n  import React from 'react';\n  import PropTypes from 'prop-types';\n\n  import makeStyles from '@material-ui/core/styles/makeStyles';\n\n  // import './debug.css'; // For debugging\n\n  const useStyles = makeStyles(".concat(e,");\n\n  const MyComponent = (").concat(a,") => {\n    const classes = useStyles(").concat(a,");\n    ").concat(i,"\n    return (\n      ").concat(n,"\n    )\n  }\n\n  MyComponent.propTypes = {\n    ").concat(r,"\n  }\n\n  export default MyComponent;\n  ")},Et=function(t){var e=at(t);return"".concat(e,"={text('").concat(e,"','placeholder_").concat(e,"')}")},wt=function(t){var e=at(t);return"".concat(e,"={action('").concat(e,"OnClick')}")},Tt=function(t){var e=function t(e){var n,a=(n={},Object(x.a)(n,"LABEL_GHOST",Et),Object(x.a)(n,"BUTTON_GHOST",wt),Object(x.a)(n,"INPUT_FIELD_GHOST",(function(){return null})),n),r=e.ghosts.map((function(t){return a[t.type](t)})).filter((function(t){return t})),i=e.children.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)}),[]);return r.concat(i)}(t);return"\n  import React from 'react';\n  import { action } from '@storybook/addon-actions';\n  import { withKnobs, text } from '@storybook/addon-knobs';\n\n  import MyComponent from './MyComponent';\n  \n  export default {\n    title: 'MyComponent',\n    component: MyComponent,\n    decorators: [withKnobs],\n  };\n  \n  export const normal = () => (\n    <MyComponent \n      ".concat(e.join("\n"),"\n    />\n  );\n\n  normal.story = { name: 'normal' };\n  \n  ")},jt=function(){return"\n  * {\n    border: 1px solid black;\n  }\n  "},kt=[{value:"REACT_MUI",label:"React + MaterialUI JSS"},{value:"AST",label:"AST"}],Nt={REACT_MUI:function(t){var e=xt(t),n=Tt(t),a=jt(),r={parser:"babel",plugins:[V.a]};return{language:"jsx",files:{"MyComponent.js":Z.a.format(e,r),"MyComponent.stories.js":Z.a.format(n,r),"debug.css":a}}},AST:function(t){return{language:"json",files:{"ast.json":JSON.stringify(t,null,2)}}}},It=h()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center",backgroundColor:"black"},syntaxHighlighter:{width:"100%"},drawerWrapper:{flex:2,maxWidth:"300px",padding:"1%"},fileSelector:{},formControl:{display:"flex"}}})),Gt=function(t){var e=t.fileNames,n=t.currentFileIndex,a=t.setCurrentFileIndex,i=It(),o=e.map((function(t){return r.a.createElement(f.a,{key:t,label:t})}));return r.a.createElement(d.a,{orientation:"vertical",value:n,onChange:function(t,e){return a(e)},className:i.fileSelector},o)},Ct=function(t){var e=t.pluginOptions,n=t.pluginType,a=t.setPluginType,i=It(),o=e.map((function(t){return r.a.createElement(R.a,{key:t.value,value:t.value},t.label)}));return r.a.createElement(z.a,{className:i.formControl},r.a.createElement(J.a,{id:"plugin-selector"},"Select Plugin"),r.a.createElement(X.a,{labelId:"plugin-selector",id:"plugin-selector",value:n,onChange:function(t){return a(t.target.value)}},o))},At=function(){var t=It(),e=JSON.parse(localStorage.getItem("AST")||'{"message":"No ast found"}'),n=localStorage.getItem("LAST_USED_PLUGIN"),i=kt[0].value,o=Object(a.useState)(n||i),s=Object(c.a)(o,2),l=s[0],u=s[1],h=Object(a.useState)(0),d=Object(c.a)(h,2),f=d[0],m=d[1];if(Object(a.useEffect)((function(){m(0),localStorage.setItem("LAST_USED_PLUGIN",l)}),[l]),!Nt[l])return u(i),r.a.createElement("div",null);var p=(0,Nt[l])(e),v=Object.keys(p.files),y=p.files[v[f]]||"",O=function(){var t=Object(U.a)(B.a.mark((function t(){var n,a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Y,v.forEach((function(t){n.file(t,p.files[t])})),n.file("ast.json",JSON.stringify(e)),t.next=5,n.generateAsync({type:"blob"});case 5:a=t.sent,K.a.saveAs(a,"code.zip");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:t.wrapper},r.a.createElement("div",{className:t.mainWrapper},r.a.createElement(F.a,{showLineNumbers:!0,language:p.language,style:W.a,className:t.syntaxHighlighter},y)),r.a.createElement(g.a,{className:t.drawerWrapper},r.a.createElement(S.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:function(){return navigator.clipboard.writeText(y)}},"Copy to Clipboard"),r.a.createElement(S.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:O},"Download ZIP"),r.a.createElement(Ct,{pluginOptions:kt,pluginType:l,setPluginType:u}),r.a.createElement(Gt,{fileNames:v,currentFileIndex:f,setCurrentFileIndex:m}),r.a.createElement(b.a,null)))};function _t(t){var e=t.children,n=t.value,a=t.index;return r.a.createElement("div",{role:"tabpanel",hidden:n!==a,id:"tabpanel-".concat(a),"aria-labelledby":"tab-".concat(a)},n===a&&r.a.createElement(m.a,{p:3},e))}var Lt=h()((function(t){return{wrapper:{flexGrow:1,backgroundColor:t.palette.background.paper,height:"100vh"},tabWrapper:{backgroundColor:"#FF8300",color:"WHITE"},tabPannelWrapper:{}}})),Ht=function(){var t=Lt(),e=Number.parseInt(l.a.parse(window.location.search).tab,10)||0,n=Object(a.useState)(e),i=Object(c.a)(n,2),o=i[0],s=i[1],u=["Segmentation","Code Generation"].map((function(t){return r.a.createElement(f.a,{label:t,key:t,id:t,"aria-controls":t})}));return r.a.createElement("div",{className:t.wrapper},r.a.createElement("div",{className:t.tabWrapper},r.a.createElement(d.a,{value:o,onChange:function(t,e){var n=A.dumpAst();localStorage.setItem("AST",JSON.stringify(n)),window.history.pushState({},"","?tab=".concat(e)),s(e)},"aria-label":"Tabs"},u)),r.a.createElement("div",{className:t.tabPannelWrapper},r.a.createElement(_t,{value:o,index:0},r.a.createElement(D,null)),r.a.createElement(_t,{value:o,index:1},r.a.createElement(At,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[140,209,210]]]);
//# sourceMappingURL=main.74ade658.chunk.js.map