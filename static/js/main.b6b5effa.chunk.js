(this["webpackJsonpspeed-flexbox"]=this["webpackJsonpspeed-flexbox"]||[]).push([[0],{140:function(e,t,n){e.exports=n(195)},145:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),c=(n(145),n(37)),s=n(115),l=n.n(s),u=n(42),h=n.n(u),d=n(232),f=n(229),m=n(234),p=n(116),v=n.n(p),g=n(227),y=n(225),b=n(226),O=n(228),x=n(72),E=n(8),S=n(128),w=n(117),T=function(e,t,n){return e*(1-n)+t*n},j=function(e,t,n,a,r){var i,o=function(e,t,n){return{x:T(e.x,t.x,n),y:T(e.y,t.y,n)}}(e,t,n),c=r?e:t;return(i={},Object(E.a)(i,"row",{x:o.x,y:c.y}),Object(E.a)(i,"column",{y:o.y,x:c.x}),i)[a]},k=function(e,t){return{x:e,y:t}};var N=function(e){return e.reduce((function(e,t){return e.push((e.length&&e[e.length-1]||0)+t),e}),[])},C=function(){function e(t,n,a,r,i){Object(x.a)(this,e),this.start=t,this.end=n,this.direction=a,this.parent=r,this.children=[],this.ghosts=[],this.id=e.id,this.depth=r?r.depth+1:0,e.id+=1,this.createSegments(i)}return Object(w.a)(e,[{key:"createSegments",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.children=[];var a=Object(S.a)(n);if(n.length!==t)for(var r=0;r<t;r+=1)a[r]=1/t;var i=N(a);i.unshift(0),this.segments=t;var o=this.start,c=this.end,s=this.direction;if(t>1)for(var l=0;l<t;l+=1){var u=j(o,c,i[l],s,!0),h=j(o,c,i[l+1],s,!1),d=new e(u,h,"row",this,1);this.children.push(d)}}},{key:"pickSegment",value:function(e){if(!(this.children.length<2)){var t=this.getMajorAxis(),n=k(e.mouseX,e.mouseY),a=this.children.map((function(e){return function(e,t,n){return Math.abs(e[n]-t[n])}(n,e.start,t)})).slice(1),r=a.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]<e[0]?t:e}))[1];this.leftChildIndex=r,this.rightChildIndex=r+1}}},{key:"update",value:function(e){this.moveActiveSegment(e)}},{key:"getMajorAxis",value:function(){var e;return(e={},Object(E.a)(e,"row","x"),Object(E.a)(e,"column","y"),e)[this.direction]}},{key:"moveActiveSegment",value:function(t){var n;if(!(this.children.length<2)){var a,r,i,o=this.getMajorAxis(),c=(n={},Object(E.a)(n,"row",t.mouseX),Object(E.a)(n,"column",t.mouseY),n)[this.direction],s=this.leftChildIndex,l=this.rightChildIndex,u=this.children[s].start[o],h=this.children[l].end[o],d=(a=c,r=u+e.PADDING,i=h-e.PADDING,Math.min(i,Math.max(r,a)));this.children[s].end[o]=d,this.children[l].start[o]=d,this.children[s].children&&(this.children[s].children=[]),this.children[l].children&&(this.children[l].children=[])}}},{key:"setDirection",value:function(e){this.direction=e,this.createSegments(this.segments)}},{key:"setSegments",value:function(e){e<1||(this.ghosts=[],this.createSegments(e))}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.end.x-this.start.x,a=this.end.y-this.start.y;t.id===this.id?(e.fill(255,255,0,20),e.stroke(255,0,0)):(e.fill(255,255,255,Math.min(20*this.depth,255)),e.stroke(0)),e.rect(this.start.x,this.start.y,n,a),this.children.forEach((function(n){return n.draw(e,t)})),this.drawGhosts(e)}},{key:"drawGhosts",value:function(e){var t,n=Math.min(14,this.end.y-this.start.y-2),a=(this.start.x+this.end.x)/2,r=(this.start.y+this.end.y)/2,i=(t={},Object(E.a)(t,"LABEL_GHOST","L"),Object(E.a)(t,"BUTTON_GHOST","B"),Object(E.a)(t,"INPUT_FIELD_GHOST","I"),t),o=this.ghosts.map((function(e){return"".concat(i[e.type]).concat(e.id)}));e.textSize(n),e.text(o.join(","),a,r)}},{key:"shouldBeActive",value:function(e,t){return!this.children.length&&function(e,t,n){var a=e.x>=t.x&&e.x<=n.x,r=e.y>=t.y&&e.y<=n.y;return a&&r}(k(e,t),this.start,this.end)}},{key:"findActive",value:function(e,t){return this.shouldBeActive(e,t)?this:this.children.map((function(n){return n.findActive(e,t)})).filter((function(e){return e}))[0]}},{key:"popGhost",value:function(){this.ghosts.pop()}},{key:"pushGhost",value:function(t){this.children.length||(e.ghostId+=1,this.ghosts.push({id:e.ghostId,type:t}))}},{key:"toJson",value:function(){var e=1;if(this.parent){var t=this.parent.getMajorAxis(),n=this.parent.end[t]-this.parent.start[t];e=(this.end[t]-this.start[t])/n}return{id:this.id,flex:e,direction:this.direction,children:this.children.map((function(e){return e.toJson()})),ghosts:this.ghosts}}},{key:"fromJson",value:function(e){if(void 0!==e.id){this.id=e.id,this.direction=e.direction;var t=e.children.map((function(e){return e.flex}));this.segments=Math.max(e.children.length,1),this.createSegments(this.segments,t),this.children.forEach((function(t,n){t.fromJson(e.children[n])})),this.ghosts=e.ghosts}}}]),e}();C.id=0,C.ghostId=0,C.PADDING=10;var G=C,I=function e(){Object(x.a)(this,e)};I.root=null,I.active=null,I.p=null,I.initialize=function(e){I.p=e,I.root=new G(k(0,0),k(e.width,e.height),"row",null,2),I.loadAst(),I.active=I.root},I.mouseDragged=function(){I.active&&I.active.update(I.p)},I.draw=function(){I.root&&I.root.draw(I.p,I.active)},I.toggleDirection=function(){if(I.root&&I.active){var e="column"===I.active.direction?"row":"column";I.active.setDirection(e)}},I.incrementSegments=function(){I.root&&I.active&&I.active.setSegments(I.active.segments+1)},I.decrementSegments=function(){I.root&&I.active&&I.active.setSegments(I.active.segments-1)},I.selectActive=function(){if(I.root){var e=I.p;I.active=I.root.findActive(e.mouseX,e.mouseY)}},I.selectActivesParent=function(){I.active&&I.active.parent&&(I.active=I.active.parent)},I.pickSegment=function(){I.active&&I.active.pickSegment(I.p)},I.popGhost=function(){I.active&&I.active.popGhost()},I.pushGhost=function(e){return function(){I.active&&I.active.pushGhost(e)}},I.dumpAst=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!I.root)return{flex:1,direction:"row",children:[]};var t=I.root.toJson();return e&&localStorage.setItem("ast",JSON.stringify(t)),t},I.loadAst=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(I.root)if(G.id=0,null===e){var t=localStorage.getItem("ast");if(t){var n=JSON.parse(t);I.root.fromJson(n),I.active=I.root}}else I.root.fromJson(e),I.active=I.root};var A=I,_=function(e){var t=window.innerWidth,n=window.innerHeight,a=null;e.setup=function(){var a=e.createCanvas(t,n);A.initialize(e),a.drop(e.gotFile)},e.myCustomRedrawAccordingToNewPropsHandler=function(a){t=a.width,n=a.height,e.resizeCanvas(a.width,a.height),A.initialize(e)},e.draw=function(){a?e.image(a,0,0,e.width,e.height):(e.background(255),e.fill(30),e.noStroke(),e.textSize(24),e.textAlign(e.CENTER),e.text("Drag an image file onto the canvas.",e.width/2,e.height/2)),A.draw()},e.mouseDragged=function(){A.mouseDragged()},e.mousePressed=function(){A.pickSegment()},e.keyReleased=function(){({87:A.selectActivesParent,83:A.selectActive,68:A.incrementSegments,65:A.decrementSegments,82:A.toggleDirection,81:A.popGhost,49:A.pushGhost("LABEL_GHOST"),50:A.pushGhost("BUTTON_GHOST"),51:A.pushGhost("INPUT_FIELD_GHOST")}[e.keyCode]||function(){return null})()},e.gotFile=function(t){"image"===t.type?e.createImg(t.data,"",(function(t){(a=t).hide();var n=a.width/a.height,r=e.width/n;e.resizeCanvas(e.width,r||e.height),A.initialize(e)})):console.log("Not an image file!")}};function L(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var H=h()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center"},drawerWrapper:{flex:2,maxWidth:"300px"},controls:{display:"flex",flexDirection:"column",margin:"10px"}}})),P=function(){var e=H();return r.a.createElement("div",{className:e.controls},r.a.createElement(y.a,null,"Controls"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"W: Go up one parent"),r.a.createElement(y.a,null,"S: Select child on cursor"),r.a.createElement(y.a,null,"D: Increase subdivision"),r.a.createElement(y.a,null,"A: Decrease subdivision"),r.a.createElement(y.a,null,"R: Switch direction"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"Ghosts"),r.a.createElement(b.a,null),r.a.createElement(y.a,null,"Q: Pop Ghost"),r.a.createElement(y.a,null,"1: Push Label Ghost"),r.a.createElement(y.a,null,"2: Push Button Ghost"),r.a.createElement(y.a,null,"3: Push Input Field Ghost"))},D=function(){var e=H(),t=.7*function(){var e=Object(a.useState)(L()),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(L())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().width,n=t/16*9;return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.mainWrapper},r.a.createElement(v.a,{sketch:_,width:t,height:n})),r.a.createElement(g.a,{className:e.drawerWrapper},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){A.dumpAst(!0)}},"Save"),r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){A.loadAst()}},"Load"),r.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){localStorage.clear("ast")}},"Clear")),r.a.createElement(b.a,null),r.a.createElement(P,null),r.a.createElement(b.a,null)))},M=n(90),B=n.n(M),W=n(118),U=n(233),F=n(127),J=n(236),R=n(235),z=n(230),X=n(231),Y=n(119),q=n(120),K=n.n(q),Q=n(91),Z=n.n(Q),$=n(121),V=n.n($),ee=function(e){return"wrapper".concat(e.id)},te=function(e){return"ghost".concat(e.id)},ne=function(e){var t;return(t={},Object(E.a)(t,"LABEL_GHOST","prop".concat(e.id)),Object(E.a)(t,"BUTTON_GHOST","prop".concat(e.id)),Object(E.a)(t,"INPUT_FIELD_GHOST",null),t)[e.type]},ae=function(e){var t;return(t={},Object(E.a)(t,"LABEL_GHOST",null),Object(E.a)(t,"BUTTON_GHOST",null),Object(E.a)(t,"INPUT_FIELD_GHOST",{value:"ghostState".concat(e.id),setter:"setGhostState".concat(e.id)}),t)[e.type]},re=function(e){var t=te(e);return"\n  ".concat(t,": {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  }\n  ")},ie=function e(t){var n,a=ee(t),r="\n    ".concat(a,": {\n      display: 'flex',\n      flexDirection: '").concat(t.direction,"',\n      flex: ").concat((n=t.flex,Math.round(100*(n+Number.EPSILON))/100),",\n    }\n  "),i=t.ghosts.map(re),o=t.children.map((function(t){return e(t)}));return[r].concat(i).concat(o)},oe=function(e){var t=ie(e);return"{".concat(t.join(",\n"),"}")},ce=function(e){var t=te(e),n=ne(e);return"\n  <div className={classes.".concat(t,"}>\n    {").concat(n,"}\n  </div>")},se=function(e){var t=te(e),n=ne(e);return'\n  <button type="button" className={classes.'.concat(t,"} onClick={").concat(n,"}>\n    Button ").concat(e.id,"\n  </button>\n  ")},le=function(e){var t=te(e),n=ae(e),a=n.value,r=n.setter;return'\n    <input \n      type="text"\n      className={classes.'.concat(t,"} \n      onChange={(e) => ").concat(r,"(e.target.value)} \n      value={").concat(a,"} \n    />\n  ")},ue=function e(t){var n,a=(n={},Object(E.a)(n,"LABEL_GHOST",ce),Object(E.a)(n,"BUTTON_GHOST",se),Object(E.a)(n,"INPUT_FIELD_GHOST",le),n),r=t.ghosts.map((function(e){return a[e.type](e)})),i=r.length?r:["."],o=0===t.children.length?i:t.children.map(e),c=ee(t);return"\n  <div className={classes.".concat(c,"}>\n    ").concat(o.join(""),"\n  </div>\n  ")},he=function(e){var t=function e(t){var n=t.ghosts.map(ne).filter((function(e){return e})),a=t.children.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]);return n.concat(a)}(e);return t.length?"{".concat(t.join(",\n"),"}"):""},de=function(e){var t=ne(e);return"".concat(t,": PropTypes.string.isRequired")},fe=function(e){var t=ne(e);return"".concat(t,": PropTypes.func.isRequired")},me=function(e){var t=function e(t){var n,a=(n={},Object(E.a)(n,"LABEL_GHOST",de),Object(E.a)(n,"BUTTON_GHOST",fe),Object(E.a)(n,"INPUT_FIELD_GHOST",(function(){return null})),n),r=t.ghosts.map((function(e){return a[e.type](e)})).filter((function(e){return e})),i=t.children.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]);return r.concat(i)}(e);return t.length?"".concat(t.join(",\n")):""},pe=function(e){var t=ae(e),n=t.value,a=t.setter;return"const [".concat(n,", ").concat(a,"] = React.useState('')")},ve=function(e){var t=function e(t){var n,a=(n={},Object(E.a)(n,"LABEL_GHOST",(function(){return null})),Object(E.a)(n,"BUTTON_GHOST",(function(){return null})),Object(E.a)(n,"INPUT_FIELD_GHOST",pe),n),r=t.ghosts.map((function(e){return a[e.type](e)})).filter((function(e){return e})),i=t.children.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]);return r.concat(i)}(e);return t.length?"".concat(t.join(";\n")):""},ge=function(e){var t=oe(e),n=ue(e),a=he(e),r=me(e),i=ve(e);return"\n  import React from 'react';\n  import PropTypes from 'prop-types';\n\n  import makeStyles from '@material-ui/core/styles/makeStyles';\n\n  // import './debug.css'; // For debugging\n\n  const useStyles = makeStyles(".concat(t,");\n\n  const MyComponent = (").concat(a,") => {\n    const classes = useStyles(").concat(a,");\n    ").concat(i,"\n    return (\n      ").concat(n,"\n    )\n  }\n\n  MyComponent.propTypes = {\n    ").concat(r,"\n  }\n\n  export default MyComponent;\n  ")},ye=function(e){var t=ne(e);return"".concat(t,"={text('").concat(t,"','placeholder_").concat(t,"')}")},be=function(e){var t=ne(e);return"".concat(t,"={action('").concat(t,"OnClick')}")},Oe=function(e){var t=function e(t){var n,a=(n={},Object(E.a)(n,"LABEL_GHOST",ye),Object(E.a)(n,"BUTTON_GHOST",be),Object(E.a)(n,"INPUT_FIELD_GHOST",(function(){return null})),n),r=t.ghosts.map((function(e){return a[e.type](e)})).filter((function(e){return e})),i=t.children.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]);return r.concat(i)}(e);return"\n  import React from 'react';\n  import { action } from '@storybook/addon-actions';\n  import { withKnobs, text } from '@storybook/addon-knobs';\n\n  import MyComponent from './MyComponent';\n  \n  export default {\n    title: 'MyComponent',\n    component: MyComponent,\n    decorators: [withKnobs],\n  };\n  \n  export const normal = () => (\n    <MyComponent \n      ".concat(t.join("\n"),"\n    />\n  );\n\n  normal.story = { name: 'normal' };\n  \n  ")},xe=function(){return"\n  * {\n    border: 1px solid black;\n  }\n  "},Ee=[{value:"REACT_MUI",label:"React + MaterialUI JSS"},{value:"AST",label:"AST"}],Se={REACT_MUI:function(e){var t=ge(e),n=Oe(e),a=xe(),r={parser:"babel",plugins:[V.a]};return{language:"jsx",files:{"MyComponent.js":Z.a.format(t,r),"MyComponent.stories.js":Z.a.format(n,r),"debug.css":a}}},AST:function(e){return{language:"json",files:{"ast.json":JSON.stringify(e,null,2)}}}},we=h()((function(){return{wrapper:{display:"flex"},mainWrapper:{flex:7,display:"flex",justifyContent:"center",backgroundColor:"black"},syntaxHighlighter:{width:"100%"},drawerWrapper:{flex:2,maxWidth:"300px",padding:"1%"},fileSelector:{},formControl:{display:"flex"}}})),Te=function(e){var t=e.fileNames,n=e.currentFileIndex,a=e.setCurrentFileIndex,i=we(),o=t.map((function(e){return r.a.createElement(f.a,{key:e,label:e})}));return r.a.createElement(d.a,{orientation:"vertical",value:n,onChange:function(e,t){return a(t)},className:i.fileSelector},o)},je=function(e){var t=e.pluginOptions,n=e.pluginType,a=e.setPluginType,i=we(),o=t.map((function(e){return r.a.createElement(R.a,{key:e.value,value:e.value},e.label)}));return r.a.createElement(z.a,{className:i.formControl},r.a.createElement(J.a,{id:"plugin-selector"},"Select Plugin"),r.a.createElement(X.a,{labelId:"plugin-selector",id:"plugin-selector",value:n,onChange:function(e){return a(e.target.value)}},o))},ke=function(){var e=we(),t=JSON.parse(localStorage.getItem("ast")||'{"message":"No ast found"}'),n=Object(a.useState)(Ee[0].value),i=Object(c.a)(n,2),o=i[0],s=i[1],l=Object(a.useState)(0),u=Object(c.a)(l,2),h=u[0],d=u[1],f=(0,Se[o])(t),m=Object.keys(f.files),p=f.files[m[h]]||"";Object(a.useEffect)((function(){d(0)}),[o]);var v=function(){var e=Object(W.a)(B.a.mark((function e(){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Y,m.forEach((function(e){n.file(e,f.files[e])})),n.file("ast.json",JSON.stringify(t)),e.next=5,n.generateAsync({type:"blob"});case 5:a=e.sent,K.a.saveAs(a,"code.zip");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.mainWrapper},r.a.createElement(U.a,{showLineNumbers:!0,language:f.language,style:F.a,className:e.syntaxHighlighter},p)),r.a.createElement(g.a,{className:e.drawerWrapper},r.a.createElement(O.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:function(){return navigator.clipboard.writeText(p)}},"Copy to Clipboard"),r.a.createElement(O.a,{style:{width:"100%"},variant:"outlined",color:"primary",onClick:v},"Download ZIP"),r.a.createElement(je,{pluginOptions:Ee,pluginType:o,setPluginType:s}),r.a.createElement(Te,{fileNames:m,currentFileIndex:h,setCurrentFileIndex:d}),r.a.createElement(b.a,null)))};function Ne(e){var t=e.children,n=e.value,a=e.index;return r.a.createElement("div",{role:"tabpanel",hidden:n!==a,id:"tabpanel-".concat(a),"aria-labelledby":"tab-".concat(a)},n===a&&r.a.createElement(m.a,{p:3},t))}var Ce=h()((function(e){return{wrapper:{flexGrow:1,backgroundColor:e.palette.background.paper,height:"100vh"},tabWrapper:{backgroundColor:"#FF8300",color:"WHITE"},tabPannelWrapper:{}}})),Ge=function(){var e=Ce(),t=Number.parseInt(l.a.parse(window.location.search).tab,10)||0,n=Object(a.useState)(t),i=Object(c.a)(n,2),o=i[0],s=i[1],u=["Segmentation","Code Generation"].map((function(e){return r.a.createElement(f.a,{label:e,key:e,id:e,"aria-controls":e})}));return r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.tabWrapper},r.a.createElement(d.a,{value:o,onChange:function(e,t){var n=A.dumpAst();localStorage.setItem("ast",JSON.stringify(n)),window.history.pushState({},"","?tab=".concat(t)),s(t)},"aria-label":"Tabs"},u)),r.a.createElement("div",{className:e.tabPannelWrapper},r.a.createElement(Ne,{value:o,index:0},r.a.createElement(D,null)),r.a.createElement(Ne,{value:o,index:1},r.a.createElement(ke,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,209,210]]]);
//# sourceMappingURL=main.b6b5effa.chunk.js.map