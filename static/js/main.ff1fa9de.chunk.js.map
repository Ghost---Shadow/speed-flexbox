{"version":3,"sources":["Segmentation/sketch/utils.js","Segmentation/sketch/constants.js","Segmentation/sketch/Tree.js","Segmentation/sketch/TreeRenderer.js","Segmentation/sketch/index.js","useWindowDimensions.js","Segmentation/index.js","PostProcessing/index.js","CodeGeneration/plugins/react-mui/utils.js","CodeGeneration/plugins/react-mui/generate-jss.js","CodeGeneration/plugins/react-mui/generate-dom.js","CodeGeneration/plugins/react-mui/generate-jsx.js","CodeGeneration/plugins/react-mui/generate-storybook.js","CodeGeneration/plugins/index.js","CodeGeneration/plugins/react-mui/index.js","CodeGeneration/plugins/ast/index.js","CodeGeneration/index.js","App.js","serviceWorker.js","index.js"],"names":["interp","a","b","t","interp1D","direction","start","interpV","x","y","interp2D","c","vec2","cumulativeSum","arr","reduce","r","push","length","Tree","end","parent","segments","this","children","id","depth","createSegments","weights","w","i","cumW","unshift","cStart","cEnd","child","p","axis","getMajorAxis","mouse","mouseX","mouseY","distances","map","Math","abs","findDistance1D","slice","closestChildStart","leftChildIndex","rightChildIndex","moveActiveSegment","v","min","max","lowerBound","upperBound","clampedMouse","PADDING","newDirection","newSegments","active","width","height","fill","stroke","rect","forEach","draw","isWithinX","isWithinY","isPointInAabb","shouldBeActive","findActive","filter","flex","pAxis","pSize","toJson","ast","undefined","fromJson","TreeRenderer","root","initialize","loadAst","mouseDragged","update","toggleDirection","setDirection","incrementSegments","setSegments","decrementSegments","selectActive","selectActivesParent","pickSegment","dumpAst","writeLocalStorage","localStorage","setItem","JSON","stringify","serialAst","getItem","validAst","parse","sketch","canvasWidth","window","innerWidth","canvasHeight","innerHeight","img","setup","createCanvas","drop","gotFile","myCustomRedrawAccordingToNewPropsHandler","props","resizeCanvas","image","background","noStroke","textSize","textAlign","CENTER","text","mousePressed","keyReleased","87","83","68","65","82","keyCode","file","type","aspect","createImg","data","hide","newHeight","console","log","getWindowDimensions","useStyles","makeStyles","wrapper","display","mainWrapper","justifyContent","drawerWrapper","maxWidth","controls","flexDirection","margin","Controls","classes","className","Typography","Segmentation","defaultWidth","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","defaultHeight","Paper","style","Button","variant","color","onClick","clear","Divider","PostProcessign","generateClassName","generateHelper","num","name","self","round","Number","EPSILON","childStringArr","childAst","concat","generate","join","jss","generateJss","dom","generateDom","availablePlugins","value","label","plugins","REACT_MUI","jsxCode","generateJsx","storybookCode","generateStorybook","opts","parser","parserBabel","files","Object","keys","fileName","prettier","format","language","AST","backgroundColor","syntaxHighlighter","padding","fileSelector","formControl","FileSelector","fileNames","currentFileIndex","setCurrentFileIndex","tabs","Tab","key","Tabs","orientation","onChange","_","PluginSelector","pluginOptions","pluginType","setPluginType","menuItems","pluginOption","MenuItem","FormControl","InputLabel","Select","labelId","e","target","CodeGeneration","generation","plugin","code","onDownload","zip","Jszip","generateAsync","content","FileSaver","saveAs","showLineNumbers","a11yDark","TabPanel","index","role","hidden","aria-labelledby","Box","theme","flexGrow","palette","paper","tabWrapper","tabPannelWrapper","App","queryTab","parseInt","queryString","location","search","tab","setTab","aria-controls","event","newValue","history","pushState","aria-label","PostProcessing","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.ff1fa9de.chunk.js","sourcesContent":["import { DIRECTION_ROW, DIRECTION_COLUMN } from './constants';\n\nexport const interp = (a, b, t) => a * (1 - t) + b * t;\n\nexport const interp2D = (a, b, t) => ({\n  x: interp(a.x, b.x, t),\n  y: interp(a.y, b.y, t),\n});\n\nexport const interp1D = (a, b, t, direction, start) => {\n  const interpV = interp2D(a, b, t);\n  const c = start ? a : b;\n  const lut = {\n    [DIRECTION_ROW]: { x: interpV.x, y: c.y },\n    [DIRECTION_COLUMN]: { y: interpV.y, x: c.x },\n  };\n  return lut[direction];\n};\n\nexport const isPointInAabb = (p, a, b) => {\n  const isWithinX = p.x >= a.x && p.x <= b.x;\n  const isWithinY = p.y >= a.y && p.y <= b.y;\n\n  return isWithinX && isWithinY;\n};\n\nexport const vec2 = (x, y) => ({ x, y });\n\n// https://gist.github.com/engelen/fbce4476c9e68c52ff7e5c2da5c24a28\nexport function argmMin(array) {\n  return array.map((x, i) => [x, i]).reduce((r, a) => (a[0] < r[0] ? a : r))[1];\n}\n\nexport const findDistance1D = (a, b, axis) => Math.abs(a[axis] - b[axis]);\n\nexport const clamp = (v, min, max) => Math.min(max, Math.max(min, v));\n\nexport const cumulativeSum = (arr) => arr.reduce((r, a) => {\n  r.push(((r.length && r[r.length - 1]) || 0) + a);\n  return r;\n}, []);\n","export const DIRECTION_ROW = 'row';\nexport const DIRECTION_COLUMN = 'column';\n","import {\n  interp1D, isPointInAabb, vec2, findDistance1D, argmMin, clamp, cumulativeSum,\n} from './utils';\nimport { DIRECTION_ROW, DIRECTION_COLUMN } from './constants';\n\nclass Tree {\n  // Counter for generated tree nodes\n  static id = 0;\n\n  // Min distance between segments/AKA min size of child\n  static PADDING = 10;\n\n  constructor(start, end, direction, parent, segments) {\n    this.start = start;\n    this.end = end;\n    this.direction = direction;\n    this.parent = parent;\n    this.children = [];\n    this.id = Tree.id;\n    this.depth = parent ? parent.depth + 1 : 0;\n    Tree.id += 1;\n\n    this.createSegments(segments);\n  }\n\n  createSegments(segments, weights = []) {\n    this.children = [];\n    const w = [...weights];\n    if (weights.length !== segments) {\n      for (let i = 0; i < segments; i += 1) {\n        w[i] = 1 / segments;\n      }\n    }\n    const cumW = cumulativeSum(w);\n    cumW.unshift(0);\n\n    this.segments = segments;\n    const { start, end, direction } = this;\n\n    if (segments > 1) {\n      for (let i = 0; i < segments; i += 1) {\n        const cStart = interp1D(start, end, cumW[i], direction, true);\n        const cEnd = interp1D(start, end, cumW[i + 1], direction, false);\n        const child = new Tree(cStart, cEnd, DIRECTION_ROW, this, 1);\n        this.children.push(child);\n      }\n    }\n  }\n\n  pickSegment(p) {\n    if (this.children.length < 2) return;\n\n    const axis = this.getMajorAxis();\n    const mouse = vec2(p.mouseX, p.mouseY);\n    const distances = this.children\n      .map((child) => findDistance1D(mouse, child.start, axis))\n      .slice(1);\n    const closestChildStart = argmMin(distances);\n\n    this.leftChildIndex = closestChildStart;\n    this.rightChildIndex = closestChildStart + 1;\n  }\n\n  update(p) {\n    this.moveActiveSegment(p);\n  }\n\n  getMajorAxis() {\n    return { [DIRECTION_ROW]: 'x', [DIRECTION_COLUMN]: 'y' }[this.direction];\n  }\n\n  moveActiveSegment(p) {\n    if (this.children.length < 2) return;\n\n    const axis = this.getMajorAxis();\n    const mouse = { [DIRECTION_ROW]: p.mouseX, [DIRECTION_COLUMN]: p.mouseY }[this.direction];\n\n    const { leftChildIndex, rightChildIndex } = this;\n\n    const lowerBound = this.children[leftChildIndex].start[axis];\n    const upperBound = this.children[rightChildIndex].end[axis];\n\n    const clampedMouse = clamp(mouse, lowerBound + Tree.PADDING, upperBound - Tree.PADDING);\n\n    this.children[leftChildIndex].end[axis] = clampedMouse;\n    this.children[rightChildIndex].start[axis] = clampedMouse;\n\n    if (this.children[leftChildIndex].children) {\n      this.children[leftChildIndex].children = [];\n    }\n    if (this.children[rightChildIndex].children) {\n      this.children[rightChildIndex].children = [];\n    }\n  }\n\n  setDirection(newDirection) {\n    this.direction = newDirection;\n    this.createSegments(this.segments);\n  }\n\n  setSegments(newSegments) {\n    if (newSegments < 1) return;\n    this.createSegments(newSegments);\n  }\n\n  draw(p, active = {}) {\n    const width = this.end.x - this.start.x;\n    const height = this.end.y - this.start.y;\n    if (active.id === this.id) {\n      p.fill(255, 255, 0, 20);\n      p.stroke(255, 0, 0);\n    } else {\n      p.fill(255, 255, 255, Math.min(this.depth * 20, 255));\n      p.stroke(0);\n    }\n    p.rect(this.start.x, this.start.y, width, height);\n    this.children.forEach((child) => child.draw(p, active));\n  }\n\n  shouldBeActive(x, y) {\n    if (this.children.length) return false;\n    return isPointInAabb(vec2(x, y), this.start, this.end);\n  }\n\n  findActive(x, y) {\n    if (this.shouldBeActive(x, y)) {\n      return this;\n    }\n    const candidates = this.children\n      .map((child) => child.findActive(x, y))\n      .filter((p) => p);\n\n    return candidates[0];\n  }\n\n  toJson() {\n    let flex = 1;\n    if (this.parent) {\n      const pAxis = this.parent.getMajorAxis();\n      const pSize = this.parent.end[pAxis] - this.parent.start[pAxis];\n      const size = this.end[pAxis] - this.start[pAxis];\n      flex = size / pSize;\n    }\n    return {\n      id: this.id,\n      flex,\n      direction: this.direction,\n      children: this.children.map((c) => c.toJson()),\n    };\n  }\n\n  fromJson(ast) {\n    if (ast.id === undefined) return;\n\n    this.id = ast.id;\n    this.direction = ast.direction;\n    const weights = ast.children.map((c) => c.flex);\n    this.segments = Math.max(ast.children.length, 1);\n    this.createSegments(this.segments, weights);\n    this.children.forEach((child, i) => {\n      child.fromJson(ast.children[i]);\n    });\n  }\n}\n\nexport default Tree;\n","import Tree from './Tree';\n\nimport { DIRECTION_ROW, DIRECTION_COLUMN } from './constants';\nimport { vec2 } from './utils';\n\n// Abstract class\nclass TreeRenderer {\n  static root = null;\n\n  static active = null;\n\n  static p = null;\n\n  static initialize = (p) => {\n    TreeRenderer.p = p;\n    TreeRenderer.root = new Tree(vec2(0, 0), vec2(p.width, p.height), DIRECTION_ROW, null, 2);\n    TreeRenderer.loadAst();\n    TreeRenderer.active = TreeRenderer.root;\n  };\n\n  static mouseDragged = () => {\n    if (!TreeRenderer.active) return;\n    TreeRenderer.active.update(TreeRenderer.p);\n  };\n\n  static draw = () => {\n    if (!TreeRenderer.root) return;\n    TreeRenderer.root.draw(TreeRenderer.p, TreeRenderer.active);\n  };\n\n  static toggleDirection = () => {\n    if (!TreeRenderer.root) return;\n    if (!TreeRenderer.active) return;\n    const newDirection = TreeRenderer.active.direction === DIRECTION_COLUMN\n      ? DIRECTION_ROW : DIRECTION_COLUMN;\n    TreeRenderer.active.setDirection(newDirection);\n  };\n\n  static incrementSegments = () => {\n    if (!TreeRenderer.root) return;\n    if (!TreeRenderer.active) return;\n    TreeRenderer.active.setSegments(TreeRenderer.active.segments + 1);\n  };\n\n  static decrementSegments = () => {\n    if (!TreeRenderer.root) return;\n    if (!TreeRenderer.active) return;\n    TreeRenderer.active.setSegments(TreeRenderer.active.segments - 1);\n  };\n\n  static selectActive = () => {\n    if (!TreeRenderer.root) return;\n    const { p } = TreeRenderer;\n    TreeRenderer.active = TreeRenderer.root.findActive(p.mouseX, p.mouseY);\n  };\n\n  static selectActivesParent = () => {\n    if (!TreeRenderer.active) return;\n    if (TreeRenderer.active.parent) {\n      TreeRenderer.active = TreeRenderer.active.parent;\n    }\n  };\n\n  static pickSegment = () => {\n    if (!TreeRenderer.active) return;\n    TreeRenderer.active.pickSegment(TreeRenderer.p);\n  };\n\n  static dumpAst = (writeLocalStorage = false) => {\n    if (!TreeRenderer.root) {\n      return {\n        flex: 1,\n        direction: 'row',\n        children: [],\n      };\n    }\n    const ast = TreeRenderer.root.toJson();\n    if (writeLocalStorage) {\n      localStorage.setItem('ast', JSON.stringify(ast));\n    }\n    return ast;\n  }\n\n  static loadAst = (ast = null) => {\n    if (!TreeRenderer.root) return;\n    Tree.id = 0;\n    if (ast === null) {\n      const serialAst = localStorage.getItem('ast');\n      if (serialAst) {\n        const validAst = JSON.parse(serialAst);\n        TreeRenderer.root.fromJson(validAst);\n        TreeRenderer.active = TreeRenderer.root;\n      }\n    } else {\n      TreeRenderer.root.fromJson(ast);\n      TreeRenderer.active = TreeRenderer.root;\n    }\n  }\n}\n\nexport default TreeRenderer;\n","import TreeRenderer from './TreeRenderer';\n\n/* eslint-disable no-param-reassign */\nconst sketch = (p) => {\n  let canvasWidth = window.innerWidth;\n  let canvasHeight = window.innerHeight;\n  let img = null;\n\n  p.setup = () => {\n    // create canvas\n    const c = p.createCanvas(canvasWidth, canvasHeight);\n    TreeRenderer.initialize(p);\n    c.drop(p.gotFile);\n  };\n\n  p.myCustomRedrawAccordingToNewPropsHandler = (props) => {\n    canvasWidth = props.width;\n    canvasHeight = props.height;\n    p.resizeCanvas(props.width, props.height);\n    TreeRenderer.initialize(p);\n  };\n\n  p.draw = () => {\n    if (!img) {\n      p.background(255);\n      p.fill(30);\n      p.noStroke();\n      p.textSize(24);\n      p.textAlign(p.CENTER);\n      p.text('Drag an image file onto the canvas.', p.width / 2, p.height / 2);\n      p.text('Reload the page if the image disappears.', p.width / 2, p.height / 2 + 50);\n    } else {\n      p.image(img, 0, 0, p.width, p.height);\n    }\n\n    TreeRenderer.draw();\n  };\n\n  p.mouseDragged = () => {\n    TreeRenderer.mouseDragged();\n  };\n\n  p.mousePressed = () => {\n    TreeRenderer.pickSegment();\n  };\n\n  p.keyReleased = () => {\n    const noop = () => null;\n    const functionToInvoke = {\n      87: TreeRenderer.selectActivesParent, // W: Go up one parent\n      83: TreeRenderer.selectActive, // S: Select child on cursor\n      68: TreeRenderer.incrementSegments, // D: Increase subdivision\n      65: TreeRenderer.decrementSegments, // A: Decrease subdivision\n      82: TreeRenderer.toggleDirection, // R: Switch direction\n    }[p.keyCode] || noop;\n    functionToInvoke();\n  };\n\n  p.gotFile = (file) => {\n    // If it's an image file\n    if (file.type === 'image') {\n      // Create an image DOM element but don't show it\n      img = p.createImg(file.data).hide();\n      const aspect = img.width / img.height;\n      const newHeight = p.width / aspect;\n      p.resizeCanvas(p.width, newHeight);\n      TreeRenderer.initialize(p);\n      // Draw the image onto the canvas\n      // p.image(img, 0, 0, p.width, p.height);\n    } else {\n      console.log('Not an image file!');\n    }\n  };\n};\n/* eslint-enable no-param-reassign */\n\nexport default sketch;\n","// https://stackoverflow.com/a/36862446/1217998\n\nimport { useState, useEffect } from 'react';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","import React from 'react';\nimport P5Wrapper from 'react-p5-wrapper';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\n\nimport sketch from './sketch';\nimport useWindowDimensions from '../useWindowDimensions';\nimport TreeRenderer from './sketch/TreeRenderer';\n\nconst useStyles = makeStyles(() => ({\n  wrapper: {\n    display: 'flex',\n  },\n  mainWrapper: {\n    flex: 7,\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  drawerWrapper: {\n    flex: 2,\n    maxWidth: '300px',\n  },\n  controls: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '10px',\n  },\n}));\n\nconst Controls = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.controls}>\n      <Typography>Controls</Typography>\n      <Typography>W: Go up one parent</Typography>\n      <Typography>S: Select child on cursor</Typography>\n      <Typography>D: Increase subdivision</Typography>\n      <Typography>A: Decrease subdivision</Typography>\n      <Typography>R: Switch direction</Typography>\n    </div>\n  );\n};\n\nconst Segmentation = () => {\n  const classes = useStyles();\n\n  const { width } = useWindowDimensions();\n\n  const defaultWidth = width * 0.7;\n  const defaultHeight = (defaultWidth / 16) * 9;\n\n  const onQuickSave = () => {\n    TreeRenderer.dumpAst(true);\n  };\n\n  const onQuickLoad = () => {\n    TreeRenderer.loadAst();\n  };\n\n  const onClear = () => {\n    localStorage.clear('ast');\n  };\n\n  return (\n    <div className={classes.wrapper}>\n      <div className={classes.mainWrapper}>\n        <P5Wrapper sketch={sketch} width={defaultWidth} height={defaultHeight} />\n      </div>\n      <Paper className={classes.drawerWrapper}>\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\n          <Button variant=\"contained\" color=\"primary\" onClick={onQuickSave}>Save</Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={onQuickLoad}>Load</Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={onClear}>Clear</Button>\n        </div>\n        <Divider />\n        <Controls />\n        <Divider />\n      </Paper>\n    </div>\n  );\n};\n\nexport default Segmentation;\n","import React from 'react';\n\nconst PostProcessign = () => (\n  <div>WIP</div>\n);\n\nexport default PostProcessign;\n","export const generateClassName = (ast) => `wrapper${ast.id}`;\n\nexport const round = (num) => Math.round((num + Number.EPSILON) * 100) / 100;\n","import { generateClassName, round } from './utils';\n\nconst generateHelper = (ast) => {\n  const name = generateClassName(ast);\n  const self = `\n    ${name}: {\n      display: 'flex',\n      flexDirection: '${ast.direction}',\n      flex: ${round(ast.flex)},\n    }\n  `;\n\n  const childStringArr = ast.children.map((childAst) => generateHelper(childAst));\n\n  return [self].concat(childStringArr);\n};\n\nconst generate = (ast) => {\n  const arr = generateHelper(ast);\n  return `{${arr.join(',\\n')}}`;\n};\n\nexport default generate;\n","import { generateClassName } from './utils';\n\nconst generate = (ast) => {\n  const childStringArr = ast.children.length === 0 ? ['&nbsp'] : ast.children.map(generate);\n\n  const className = generateClassName(ast);\n\n  const code = `\n  <div className={classes.${className}}>\n    ${childStringArr.join('')}\n  </div>\n  `;\n  return code;\n};\n\nexport default generate;\n","import generateJss from './generate-jss';\nimport generateDom from './generate-dom';\n\nconst generate = (ast) => {\n  const jss = generateJss(ast);\n  const dom = generateDom(ast);\n  const code = `\n  import React from 'react';\n  import PropTypes from 'prop-types';\n\n  import makeStyles from '@material-ui/core/styles/makeStyles';\n\n  const useStyles = makeStyles(${jss});\n\n  const MyComponent = (props) => {\n    const classes = useStyles(props);\n    return (\n      ${dom}\n    )\n  }\n\n  MyComponent.propTypes = {\n    // TODO\n  }\n\n  export default MyComponent;\n  `;\n  return code;\n};\n\nexport default generate;\n","const generate = () => {\n  const code = `\n  import React from 'react';\n  // import { action } from '@storybook/addon-actions';\n  import { withKnobs } from '@storybook/addon-knobs';\n\n  import MyComponent from './MyComponent';\n  \n  export default {\n    title: 'MyComponent',\n    component: MyComponent,\n    decorators: [withKnobs],\n  };\n  \n  export const normal = () => (\n    <MyComponent />\n  );\n\n  normal.story = { name: 'normal' };\n  \n  `;\n  return code;\n};\n\nexport default generate;\n","import ReactMui from './react-mui';\nimport Ast from './ast';\n\nconst REACT_MUI = 'REACT_MUI';\nconst AST = 'AST';\n\nexport const availablePlugins = [\n  { value: REACT_MUI, label: 'React + MaterialUI JSS' },\n  { value: AST, label: 'AST' },\n];\n\nexport const plugins = {\n  REACT_MUI: ReactMui,\n  AST: Ast,\n};\n","import prettier from 'prettier/standalone';\nimport parserBabel from 'prettier/parser-babel';\n\nimport generateJsx from './generate-jsx';\nimport generateStorybook from './generate-storybook';\n\nconst generate = (ast) => {\n  const jsxCode = generateJsx(ast);\n  const storybookCode = generateStorybook(ast);\n  const opts = { parser: 'babel', plugins: [parserBabel] };\n  const files = {\n    'MyComponent.js': jsxCode,\n    'MyComponent.stories.js': storybookCode,\n  };\n\n  Object.keys(files).forEach((fileName) => {\n    files[fileName] = prettier.format(files[fileName], opts);\n  });\n\n  return {\n    language: 'jsx',\n    files,\n  };\n};\n\nexport default generate;\n","const generate = (ast) => {\n  const code = JSON.stringify(ast, null, 2);\n  return {\n    language: 'json',\n    files: { 'ast.json': code },\n  };\n};\n\nexport default generate;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport a11yDark from 'react-syntax-highlighter/dist/esm/styles/hljs/a11y-dark';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport * as Jszip from 'jszip';\nimport FileSaver from 'file-saver';\n\nimport { availablePlugins, plugins } from './plugins';\n\nconst useStyles = makeStyles(() => ({\n  wrapper: {\n    display: 'flex',\n  },\n  mainWrapper: {\n    flex: 7,\n    display: 'flex',\n    justifyContent: 'center',\n    backgroundColor: 'black',\n  },\n  syntaxHighlighter: {\n    width: '100%',\n  },\n  drawerWrapper: {\n    flex: 2,\n    maxWidth: '300px',\n    padding: '1%',\n  },\n  fileSelector: {\n\n  },\n  formControl: {\n    display: 'flex',\n  },\n}));\n\nconst FileSelector = ({ fileNames, currentFileIndex, setCurrentFileIndex }) => {\n  const classes = useStyles();\n  const tabs = fileNames.map((fileName) => (\n    <Tab key={fileName} label={fileName} />\n  ));\n  return (\n    <Tabs\n      orientation=\"vertical\"\n      value={currentFileIndex}\n      onChange={(_, v) => setCurrentFileIndex(v)}\n      className={classes.fileSelector}\n    >\n      {tabs}\n    </Tabs>\n  );\n};\n\nFileSelector.propTypes = {\n  fileNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  currentFileIndex: PropTypes.number.isRequired,\n  setCurrentFileIndex: PropTypes.func.isRequired,\n};\n\nconst PluginSelector = ({ pluginOptions, pluginType, setPluginType }) => {\n  const classes = useStyles();\n\n  const menuItems = pluginOptions.map((pluginOption) => (\n    <MenuItem key={pluginOption.value} value={pluginOption.value}>{pluginOption.label}</MenuItem>\n  ));\n\n  return (\n    <FormControl className={classes.formControl}>\n      <InputLabel id=\"plugin-selector\">Select Plugin</InputLabel>\n      <Select\n        labelId=\"plugin-selector\"\n        id=\"plugin-selector\"\n        value={pluginType}\n        onChange={(e) => setPluginType(e.target.value)}\n      >\n        {menuItems}\n      </Select>\n    </FormControl>\n  );\n};\n\nPluginSelector.propTypes = {\n  pluginOptions: PropTypes.arrayOf(PropTypes.shape({\n    value: PropTypes.string,\n    label: PropTypes.string,\n  })).isRequired,\n  pluginType: PropTypes.string.isRequired,\n  setPluginType: PropTypes.func.isRequired,\n};\n\nconst CodeGeneration = () => {\n  const classes = useStyles();\n\n  const ast = JSON.parse(localStorage.getItem('ast') || '{\"message\":\"No ast found\"}');\n\n  const [pluginType, setPluginType] = useState(availablePlugins[0].value);\n  const [currentFileIndex, setCurrentFileIndex] = useState(0);\n\n  const plugin = plugins[pluginType];\n  const generation = plugin(ast);\n  const fileNames = Object.keys(generation.files);\n  const code = generation.files[fileNames[currentFileIndex]] || '';\n\n  useEffect(() => {\n    setCurrentFileIndex(0);\n  }, [pluginType]);\n\n  const onDownload = async () => {\n    const zip = new Jszip();\n    fileNames.forEach((fileName) => {\n      zip.file(fileName, generation.files[fileName]);\n    });\n    zip.file('ast.json', JSON.stringify(ast));\n    const content = await zip.generateAsync({ type: 'blob' });\n    FileSaver.saveAs(content, 'code.zip');\n  };\n\n  return (\n    <div className={classes.wrapper}>\n      <div className={classes.mainWrapper}>\n        <SyntaxHighlighter\n          showLineNumbers\n          language={generation.language}\n          style={a11yDark}\n          className={classes.syntaxHighlighter}\n        >\n          {code}\n        </SyntaxHighlighter>\n      </div>\n      <Paper className={classes.drawerWrapper}>\n        <Button style={{ width: '100%' }} variant=\"outlined\" color=\"primary\" onClick={onDownload}>\n          Download ZIP\n        </Button>\n        <PluginSelector\n          pluginOptions={availablePlugins}\n          pluginType={pluginType}\n          setPluginType={setPluginType}\n        />\n        <FileSelector\n          fileNames={fileNames}\n          currentFileIndex={currentFileIndex}\n          setCurrentFileIndex={setCurrentFileIndex}\n        />\n        <Divider />\n      </Paper>\n    </div>\n  );\n};\n\nexport default CodeGeneration;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport queryString from 'query-string';\n\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Box from '@material-ui/core/Box';\n\nimport Segmentation from './Segmentation';\nimport TreeRenderer from './Segmentation/sketch/TreeRenderer';\nimport PostProcessing from './PostProcessing';\nimport CodeGeneration from './CodeGeneration';\n\nfunction TabPanel(props) {\n  const {\n    children, value, index,\n  } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n    >\n      {value === index && (\n        <Box p={3}>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node.isRequired,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nconst useStyles = makeStyles((theme) => ({\n  wrapper: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n    height: '100vh',\n  },\n  tabWrapper: {\n    backgroundColor: '#FF8300',\n    color: 'WHITE',\n  },\n  tabPannelWrapper: {\n  },\n}));\n\nconst App = () => {\n  const classes = useStyles();\n\n  const queryTab = Number.parseInt(queryString.parse(window.location.search).tab, 10) || 0;\n\n  const [tab, setTab] = useState(queryTab);\n\n  const handleChange = (event, newValue) => {\n    const ast = TreeRenderer.dumpAst();\n    localStorage.setItem('ast', JSON.stringify(ast));\n    window.history.pushState({}, '', `?tab=${newValue}`);\n    setTab(newValue);\n  };\n\n  const tabLabels = ['Segmentation', 'Post Processing', 'Code Generation'];\n\n  const tabs = tabLabels.map((label) => (\n    <Tab label={label} key={label} id={label} aria-controls={label} />\n  ));\n\n  return (\n    <div className={classes.wrapper}>\n      <div className={classes.tabWrapper}>\n        <Tabs value={tab} onChange={handleChange} aria-label=\"Tabs\">\n          {tabs}\n        </Tabs>\n      </div>\n      <div className={classes.tabPannelWrapper}>\n        <TabPanel value={tab} index={0}>\n          <Segmentation />\n        </TabPanel>\n        <TabPanel value={tab} index={1}>\n          <PostProcessing />\n        </TabPanel>\n        <TabPanel value={tab} index={2}>\n          <CodeGeneration />\n        </TabPanel>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}